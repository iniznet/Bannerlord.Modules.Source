using System;
using System.Collections.Generic;
using StoryMode.Quests.QuestTasks;
using StoryMode.StoryModePhases;
using TaleWorlds.CampaignSystem;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace StoryMode.Quests.TutorialPhase
{
	// Token: 0x0200001F RID: 31
	public class PurchaseGrainTutorialQuest : StoryModeQuestBase
	{
		// Token: 0x1700004D RID: 77
		// (get) Token: 0x06000153 RID: 339 RVA: 0x00008211 File Offset: 0x00006411
		private TextObject _buyItemTaskStartLog
		{
			get
			{
				TextObject textObject = new TextObject("{=D9RoNGJg}Buy 2 {GRAIN}{.s}. Click \"Buy Products\" option on village menu to buy products.", null);
				textObject.SetTextVariable("GRAIN", DefaultItems.Grain.Name);
				return textObject;
			}
		}

		// Token: 0x1700004E RID: 78
		// (get) Token: 0x06000154 RID: 340 RVA: 0x00008234 File Offset: 0x00006434
		public override TextObject Title
		{
			get
			{
				TextObject textObject = new TextObject("{=JhEzD45J}Purchase {GRAIN}", null);
				textObject.SetTextVariable("GRAIN", DefaultItems.Grain.Name);
				return textObject;
			}
		}

		// Token: 0x06000155 RID: 341 RVA: 0x00008258 File Offset: 0x00006458
		public PurchaseGrainTutorialQuest(Hero questGiver)
			: base("purchase_grain_tutorial_quest", questGiver, CampaignTime.Never)
		{
			TutorialPhase.Instance.InitializeTutorialVillageItemRoster();
			this.SetDialogs();
			TextObject textObject = new TextObject("{=TLRyyRaW}Purchased {GRAIN} Amount", null);
			textObject.SetTextVariable("GRAIN", DefaultItems.Grain.Name);
			this._purchaseItemTutorialQuestTask = new PurchaseItemTutorialQuestTask(new Action(this.PurchaseItemTaskOnSuccess), 2, DefaultItems.Grain, base.AddDiscreteLog(this._buyItemTaskStartLog, textObject, 0, 2, null, false));
			base.AddTask(this._purchaseItemTutorialQuestTask);
		}

		// Token: 0x06000156 RID: 342 RVA: 0x000082E2 File Offset: 0x000064E2
		protected override void SetDialogs()
		{
		}

		// Token: 0x06000157 RID: 343 RVA: 0x000082E4 File Offset: 0x000064E4
		protected override void InitializeQuestOnGameLoad()
		{
			this.SetDialogs();
			this._purchaseItemTutorialQuestTask.AddTaskBehaviorsOnGameLoad(new Action(this.PurchaseItemTaskOnSuccess), null, null);
			this._purchaseItemTutorialQuestTask.InitializeTaskOnLoad(2, DefaultItems.Grain);
		}

		// Token: 0x06000158 RID: 344 RVA: 0x00008316 File Offset: 0x00006516
		private void PurchaseItemTaskOnSuccess()
		{
			base.CompleteQuestWithSuccess();
		}

		// Token: 0x06000159 RID: 345 RVA: 0x0000831E File Offset: 0x0000651E
		internal static void AutoGeneratedStaticCollectObjectsPurchaseGrainTutorialQuest(object o, List<object> collectedObjects)
		{
			((PurchaseGrainTutorialQuest)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x0600015A RID: 346 RVA: 0x0000832C File Offset: 0x0000652C
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this._purchaseItemTutorialQuestTask);
		}

		// Token: 0x0600015B RID: 347 RVA: 0x00008341 File Offset: 0x00006541
		internal static object AutoGeneratedGetMemberValue_purchaseItemTutorialQuestTask(object o)
		{
			return ((PurchaseGrainTutorialQuest)o)._purchaseItemTutorialQuestTask;
		}

		// Token: 0x04000085 RID: 133
		private const int BuyGrainAmount = 2;

		// Token: 0x04000086 RID: 134
		[SaveableField(1)]
		private readonly PurchaseItemTutorialQuestTask _purchaseItemTutorialQuestTask;
	}
}
