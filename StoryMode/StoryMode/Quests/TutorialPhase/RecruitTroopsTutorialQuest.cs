using System;
using System.Collections.Generic;
using StoryMode.Quests.QuestTasks;
using TaleWorlds.CampaignSystem;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace StoryMode.Quests.TutorialPhase
{
	// Token: 0x02000020 RID: 32
	public class RecruitTroopsTutorialQuest : StoryModeQuestBase
	{
		// Token: 0x1700004F RID: 79
		// (get) Token: 0x0600015C RID: 348 RVA: 0x0000834E File Offset: 0x0000654E
		private TextObject _recruitTroopTaskStartLog
		{
			get
			{
				return new TextObject("{=vCBuF6dq}Recruit 4 recruits. Click \"Recruit Troops\" option on village menu to recruit troops.", null);
			}
		}

		// Token: 0x17000050 RID: 80
		// (get) Token: 0x0600015D RID: 349 RVA: 0x0000835B File Offset: 0x0000655B
		public override TextObject Title
		{
			get
			{
				return new TextObject("{=y3fn2vWY}Recruit Troops", null);
			}
		}

		// Token: 0x0600015E RID: 350 RVA: 0x00008368 File Offset: 0x00006568
		public RecruitTroopsTutorialQuest(Hero questGiver)
			: base("recruit_troops_tutorial_quest", questGiver, CampaignTime.Never)
		{
			this.SetDialogs();
			this._recruitTroopTutorialQuestTask = new RecruitTroopTutorialQuestTask(new Action(this.RecruitTaskOnSuccess), 4, new Func<CharacterObject, bool>(this.DoesRecruitedTroopSatifyRecruitTroopTask), Settlement.CurrentSettlement, base.AddDiscreteLog(this._recruitTroopTaskStartLog, new TextObject("{=y3fn2vWY}Recruit Troops", null), 0, 4, null, false));
			base.AddTask(this._recruitTroopTutorialQuestTask);
		}

		// Token: 0x0600015F RID: 351 RVA: 0x000083DC File Offset: 0x000065DC
		protected override void SetDialogs()
		{
		}

		// Token: 0x06000160 RID: 352 RVA: 0x000083E0 File Offset: 0x000065E0
		protected override void InitializeQuestOnGameLoad()
		{
			this.SetDialogs();
			this._recruitTroopTutorialQuestTask.AddTaskBehaviorsOnGameLoad(new Action(this.RecruitTaskOnSuccess), null, null);
			this._recruitTroopTutorialQuestTask.InitializeTaskOnLoad(4, new Func<CharacterObject, bool>(this.DoesRecruitedTroopSatifyRecruitTroopTask), Settlement.Find("village_ES3_2"));
		}

		// Token: 0x06000161 RID: 353 RVA: 0x0000842E File Offset: 0x0000662E
		private bool DoesRecruitedTroopSatifyRecruitTroopTask(CharacterObject troop)
		{
			return true;
		}

		// Token: 0x06000162 RID: 354 RVA: 0x00008431 File Offset: 0x00006631
		private void RecruitTaskOnSuccess()
		{
			base.CompleteQuestWithSuccess();
		}

		// Token: 0x06000163 RID: 355 RVA: 0x00008439 File Offset: 0x00006639
		internal static void AutoGeneratedStaticCollectObjectsRecruitTroopsTutorialQuest(object o, List<object> collectedObjects)
		{
			((RecruitTroopsTutorialQuest)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06000164 RID: 356 RVA: 0x00008447 File Offset: 0x00006647
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this._recruitTroopTutorialQuestTask);
		}

		// Token: 0x06000165 RID: 357 RVA: 0x0000845C File Offset: 0x0000665C
		internal static object AutoGeneratedGetMemberValue_recruitTroopTutorialQuestTask(object o)
		{
			return ((RecruitTroopsTutorialQuest)o)._recruitTroopTutorialQuestTask;
		}

		// Token: 0x04000087 RID: 135
		private const int RecruitTroopAmount = 4;

		// Token: 0x04000088 RID: 136
		[SaveableField(1)]
		private readonly RecruitTroopTutorialQuestTask _recruitTroopTutorialQuestTask;
	}
}
