using System;
using System.Collections.Generic;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Library;
using TaleWorlds.Localization;

namespace TaleWorlds.CampaignSystem.Party.PartyComponents
{
	public abstract class PartyComponent
	{
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
		}

		public MobileParty MobileParty { get; private set; }

		public PartyBase Party
		{
			get
			{
				return this.MobileParty.Party;
			}
		}

		public abstract Hero PartyOwner { get; }

		public abstract TextObject Name { get; }

		public abstract Settlement HomeSettlement { get; }

		public virtual int WagePaymentLimit
		{
			get
			{
				return Campaign.Current.Models.PartyWageModel.MaxWage;
			}
		}

		public virtual void SetWagePaymentLimit(int newLimit)
		{
			Debug.FailedAssert("Invalid set wage payment limit function usage!", "C:\\Develop\\MB3\\Source\\Bannerlord\\TaleWorlds.CampaignSystem\\Party\\PartyComponents\\PartyComponent.cs", "SetWagePaymentLimit", 26);
		}

		public virtual Hero Leader
		{
			get
			{
				return null;
			}
		}

		internal void SetMobilePartyInternal(MobileParty party)
		{
			this.MobileParty = party;
		}

		internal void Initialize(MobileParty party)
		{
			this.SetMobilePartyInternal(party);
			this.OnInitialize();
		}

		internal void Finish()
		{
			this.OnFinalize();
		}

		protected virtual void OnInitialize()
		{
		}

		protected virtual void OnFinalize()
		{
		}

		public virtual void ClearCachedName()
		{
		}

		public virtual void ChangePartyLeader(Hero newLeader)
		{
		}

		public virtual void GetMountAndHarnessVisualIdsForPartyIcon(PartyBase party, out string mountStringId, out string harnessStringId)
		{
			mountStringId = "";
			harnessStringId = "";
		}

		public delegate void OnPartyComponentCreatedDelegate(MobileParty mobileParty);
	}
}
