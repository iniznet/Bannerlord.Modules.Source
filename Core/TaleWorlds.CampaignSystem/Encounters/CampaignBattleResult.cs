using System;
using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.Encounters
{
	// Token: 0x02000296 RID: 662
	public class CampaignBattleResult
	{
		// Token: 0x06002356 RID: 9046 RVA: 0x0009532C File Offset: 0x0009352C
		internal static void AutoGeneratedStaticCollectObjectsCampaignBattleResult(object o, List<object> collectedObjects)
		{
			((CampaignBattleResult)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002357 RID: 9047 RVA: 0x0009533A File Offset: 0x0009353A
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
		}

		// Token: 0x06002358 RID: 9048 RVA: 0x0009533C File Offset: 0x0009353C
		internal static object AutoGeneratedGetMemberValuePlayerVictory(object o)
		{
			return ((CampaignBattleResult)o).PlayerVictory;
		}

		// Token: 0x06002359 RID: 9049 RVA: 0x0009534E File Offset: 0x0009354E
		internal static object AutoGeneratedGetMemberValuePlayerDefeat(object o)
		{
			return ((CampaignBattleResult)o).PlayerDefeat;
		}

		// Token: 0x0600235A RID: 9050 RVA: 0x00095360 File Offset: 0x00093560
		internal static object AutoGeneratedGetMemberValueEnemyPulledBack(object o)
		{
			return ((CampaignBattleResult)o).EnemyPulledBack;
		}

		// Token: 0x0600235B RID: 9051 RVA: 0x00095372 File Offset: 0x00093572
		internal static object AutoGeneratedGetMemberValueEnemyRetreated(object o)
		{
			return ((CampaignBattleResult)o).EnemyRetreated;
		}

		// Token: 0x170008B7 RID: 2231
		// (get) Token: 0x0600235C RID: 9052 RVA: 0x00095384 File Offset: 0x00093584
		// (set) Token: 0x0600235D RID: 9053 RVA: 0x0009538C File Offset: 0x0009358C
		[SaveableProperty(0)]
		public bool PlayerVictory { get; private set; }

		// Token: 0x170008B8 RID: 2232
		// (get) Token: 0x0600235E RID: 9054 RVA: 0x00095395 File Offset: 0x00093595
		// (set) Token: 0x0600235F RID: 9055 RVA: 0x0009539D File Offset: 0x0009359D
		[SaveableProperty(1)]
		public bool PlayerDefeat { get; private set; }

		// Token: 0x170008B9 RID: 2233
		// (get) Token: 0x06002360 RID: 9056 RVA: 0x000953A6 File Offset: 0x000935A6
		// (set) Token: 0x06002361 RID: 9057 RVA: 0x000953AE File Offset: 0x000935AE
		[SaveableProperty(2)]
		public bool EnemyPulledBack { get; private set; }

		// Token: 0x170008BA RID: 2234
		// (get) Token: 0x06002362 RID: 9058 RVA: 0x000953B7 File Offset: 0x000935B7
		// (set) Token: 0x06002363 RID: 9059 RVA: 0x000953BF File Offset: 0x000935BF
		[SaveableProperty(3)]
		public bool EnemyRetreated { get; private set; }

		// Token: 0x170008BB RID: 2235
		// (get) Token: 0x06002364 RID: 9060 RVA: 0x000953C8 File Offset: 0x000935C8
		public bool BattleResolved
		{
			get
			{
				return this.PlayerVictory || this.PlayerDefeat;
			}
		}

		// Token: 0x06002365 RID: 9061 RVA: 0x000953DC File Offset: 0x000935DC
		public static CampaignBattleResult GetResult(BattleState winnerSide, bool enemyRetreated = false)
		{
			if (PlayerEncounter.Current != null)
			{
				CampaignBattleResult campaignBattleResult = new CampaignBattleResult();
				if ((winnerSide == BattleState.AttackerVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker) || (winnerSide == BattleState.DefenderVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Defender))
				{
					campaignBattleResult.PlayerVictory = true;
				}
				else if ((winnerSide == BattleState.AttackerVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Defender) || (winnerSide == BattleState.DefenderVictory && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker))
				{
					campaignBattleResult.PlayerDefeat = true;
				}
				else if (winnerSide == BattleState.DefenderPullBack && PlayerEncounter.Current.PlayerSide == BattleSideEnum.Attacker)
				{
					campaignBattleResult.EnemyPulledBack = true;
				}
				campaignBattleResult.EnemyRetreated = enemyRetreated;
				return campaignBattleResult;
			}
			return null;
		}
	}
}
