using System;
using System.Collections.Generic;
using TaleWorlds.Core;
using TaleWorlds.Library;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem
{
	// Token: 0x02000063 RID: 99
	public class JournalLog
	{
		// Token: 0x06000D64 RID: 3428 RVA: 0x00040AD0 File Offset: 0x0003ECD0
		internal static void AutoGeneratedStaticCollectObjectsJournalLog(object o, List<object> collectedObjects)
		{
			((JournalLog)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06000D65 RID: 3429 RVA: 0x00040ADE File Offset: 0x0003ECDE
		protected virtual void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.LogTime, collectedObjects);
			collectedObjects.Add(this.LogText);
			collectedObjects.Add(this.TaskName);
		}

		// Token: 0x06000D66 RID: 3430 RVA: 0x00040B09 File Offset: 0x0003ED09
		internal static object AutoGeneratedGetMemberValueCurrentProgress(object o)
		{
			return ((JournalLog)o).CurrentProgress;
		}

		// Token: 0x06000D67 RID: 3431 RVA: 0x00040B1B File Offset: 0x0003ED1B
		internal static object AutoGeneratedGetMemberValueLogTime(object o)
		{
			return ((JournalLog)o).LogTime;
		}

		// Token: 0x06000D68 RID: 3432 RVA: 0x00040B2D File Offset: 0x0003ED2D
		internal static object AutoGeneratedGetMemberValueLogText(object o)
		{
			return ((JournalLog)o).LogText;
		}

		// Token: 0x06000D69 RID: 3433 RVA: 0x00040B3A File Offset: 0x0003ED3A
		internal static object AutoGeneratedGetMemberValueTaskName(object o)
		{
			return ((JournalLog)o).TaskName;
		}

		// Token: 0x06000D6A RID: 3434 RVA: 0x00040B47 File Offset: 0x0003ED47
		internal static object AutoGeneratedGetMemberValueRange(object o)
		{
			return ((JournalLog)o).Range;
		}

		// Token: 0x06000D6B RID: 3435 RVA: 0x00040B59 File Offset: 0x0003ED59
		internal static object AutoGeneratedGetMemberValueType(object o)
		{
			return ((JournalLog)o).Type;
		}

		// Token: 0x1700034C RID: 844
		// (get) Token: 0x06000D6C RID: 3436 RVA: 0x00040B6B File Offset: 0x0003ED6B
		// (set) Token: 0x06000D6D RID: 3437 RVA: 0x00040B73 File Offset: 0x0003ED73
		[SaveableProperty(3)]
		public int CurrentProgress { get; private set; }

		// Token: 0x06000D6E RID: 3438 RVA: 0x00040B7C File Offset: 0x0003ED7C
		public JournalLog(CampaignTime logTime, TextObject logText, TextObject taskName = null, int currentProgress = 0, int range = 0, LogType type = LogType.Text)
		{
			this.LogTime = logTime;
			this.LogText = logText;
			this.TaskName = taskName;
			this.CurrentProgress = currentProgress;
			this.Range = range;
			this.Type = type;
		}

		// Token: 0x06000D6F RID: 3439 RVA: 0x00040BB1 File Offset: 0x0003EDB1
		public void UpdateCurrentProgress(int progress)
		{
			this.CurrentProgress = progress;
		}

		// Token: 0x06000D70 RID: 3440 RVA: 0x00040BBA File Offset: 0x0003EDBA
		public bool HasBeenCompleted()
		{
			return this.CurrentProgress >= this.Range;
		}

		// Token: 0x06000D71 RID: 3441 RVA: 0x00040BD0 File Offset: 0x0003EDD0
		public TextObject GetTimeText()
		{
			int num = MathF.Ceiling(CampaignTime.Now.ToDays) - MathF.Ceiling(this.LogTime.ToDays);
			TextObject textObject;
			if (num != 0)
			{
				if (num != 1)
				{
					textObject = GameTexts.FindText("str_DAY_days_ago", null);
					textObject.SetTextVariable("DAY", num);
				}
				else
				{
					textObject = GameTexts.FindText("str_yesterday", null);
				}
			}
			else
			{
				textObject = GameTexts.FindText("str_today", null);
			}
			return textObject;
		}

		// Token: 0x040003E6 RID: 998
		[SaveableField(0)]
		public readonly CampaignTime LogTime;

		// Token: 0x040003E7 RID: 999
		[SaveableField(1)]
		public readonly TextObject LogText;

		// Token: 0x040003E8 RID: 1000
		[SaveableField(2)]
		public readonly TextObject TaskName;

		// Token: 0x040003EA RID: 1002
		[SaveableField(4)]
		public readonly int Range;

		// Token: 0x040003EB RID: 1003
		[SaveableField(5)]
		public readonly LogType Type;
	}
}
