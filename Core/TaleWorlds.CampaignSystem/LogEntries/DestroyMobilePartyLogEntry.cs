using System;
using System.Collections.Generic;
using Helpers;
using TaleWorlds.CampaignSystem.Party;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002DC RID: 732
	public class DestroyMobilePartyLogEntry : LogEntry
	{
		// Token: 0x06002A79 RID: 10873 RVA: 0x000B4467 File Offset: 0x000B2667
		internal static void AutoGeneratedStaticCollectObjectsDestroyMobilePartyLogEntry(object o, List<object> collectedObjects)
		{
			((DestroyMobilePartyLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002A7A RID: 10874 RVA: 0x000B4478 File Offset: 0x000B2678
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.Hero);
			collectedObjects.Add(this.Faction);
			collectedObjects.Add(this.DestroyerPartyFaction);
			collectedObjects.Add(this.DestroyerHero);
			collectedObjects.Add(this._destroyerPartyName);
		}

		// Token: 0x06002A7B RID: 10875 RVA: 0x000B44C8 File Offset: 0x000B26C8
		internal static object AutoGeneratedGetMemberValueHero(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).Hero;
		}

		// Token: 0x06002A7C RID: 10876 RVA: 0x000B44D5 File Offset: 0x000B26D5
		internal static object AutoGeneratedGetMemberValueFaction(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).Faction;
		}

		// Token: 0x06002A7D RID: 10877 RVA: 0x000B44E2 File Offset: 0x000B26E2
		internal static object AutoGeneratedGetMemberValueDestroyerPartyFaction(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).DestroyerPartyFaction;
		}

		// Token: 0x06002A7E RID: 10878 RVA: 0x000B44EF File Offset: 0x000B26EF
		internal static object AutoGeneratedGetMemberValueDestroyerHero(object o)
		{
			return ((DestroyMobilePartyLogEntry)o).DestroyerHero;
		}

		// Token: 0x06002A7F RID: 10879 RVA: 0x000B44FC File Offset: 0x000B26FC
		internal static object AutoGeneratedGetMemberValue_destroyerPartyName(object o)
		{
			return ((DestroyMobilePartyLogEntry)o)._destroyerPartyName;
		}

		// Token: 0x06002A80 RID: 10880 RVA: 0x000B450C File Offset: 0x000B270C
		public DestroyMobilePartyLogEntry(MobileParty mobileParty, PartyBase destroyerParty)
		{
			this.Hero = mobileParty.LeaderHero;
			this.Faction = mobileParty.MapFaction;
			this._destroyerPartyName = ((destroyerParty != null) ? destroyerParty.Name : null);
			this.DestroyerPartyFaction = ((destroyerParty != null) ? destroyerParty.MapFaction : null);
			this.DestroyerHero = ((destroyerParty != null) ? destroyerParty.LeaderHero : null);
		}

		// Token: 0x06002A81 RID: 10881 RVA: 0x000B4570 File Offset: 0x000B2770
		public override int GetAsRumor(Settlement settlement, ref TextObject comment)
		{
			int num = 0;
			if (this.DestroyerPartyFaction == settlement.MapFaction && this.DestroyerHero != null && this.Hero != null)
			{
				comment = new TextObject("{=shihxzUN}Praise be... {LORD.LINK} met {OTHER_SIDE} and whipped them soundly. Maybe now there will be an end to this war.", null);
				StringHelpers.SetCharacterProperties("LORD", this.DestroyerHero.CharacterObject, comment, false);
				comment.SetTextVariable("OTHER_SIDE", FactionHelper.GetTermUsedByOtherFaction(this.Faction, settlement.MapFaction, false));
				return 4;
			}
			if (this.Faction == settlement.MapFaction && this.DestroyerHero != null && this.Hero != null)
			{
				comment = new TextObject("{=O4dWdKZd}Ach... So they say {LORD.LINK} got {?LORD.GENDER}his{?}her{\\?} arse handed to {?LORD.GENDER}him{?}her{\\?} by {OTHER_SIDE}. Grim times, friend.", null);
				StringHelpers.SetCharacterProperties("LORD", this.Hero.CharacterObject, comment, false);
				comment.SetTextVariable("OTHER_SIDE", FactionHelper.GetTermUsedByOtherFaction(this.DestroyerPartyFaction, settlement.MapFaction, false));
				return 4;
			}
			return num;
		}

		// Token: 0x06002A82 RID: 10882 RVA: 0x000B464C File Offset: 0x000B284C
		public override string ToString()
		{
			TextObject textObject = TextObject.Empty;
			if (this.Hero != null && this._destroyerPartyName != null)
			{
				textObject = new TextObject("{=i90Cmb5e}Party of {HERO.NAME} is destroyed by {DESTROYER_PARTY}", null);
				StringHelpers.SetCharacterProperties("HERO", this.Hero.CharacterObject, textObject, false);
				textObject.SetTextVariable("DESTROYER_PARTY", this._destroyerPartyName);
			}
			return textObject.ToString();
		}

		// Token: 0x04000CD1 RID: 3281
		[SaveableField(210)]
		public readonly Hero Hero;

		// Token: 0x04000CD2 RID: 3282
		[SaveableField(211)]
		public readonly IFaction Faction;

		// Token: 0x04000CD3 RID: 3283
		[SaveableField(212)]
		public readonly IFaction DestroyerPartyFaction;

		// Token: 0x04000CD4 RID: 3284
		[SaveableField(213)]
		public readonly Hero DestroyerHero;

		// Token: 0x04000CD5 RID: 3285
		[SaveableField(214)]
		private readonly TextObject _destroyerPartyName;
	}
}
