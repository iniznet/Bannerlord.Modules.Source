using System;
using System.Collections.Generic;
using Helpers;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002DD RID: 733
	public class GatherArmyLogEntry : LogEntry, IChatNotification
	{
		// Token: 0x06002A83 RID: 10883 RVA: 0x000B46AB File Offset: 0x000B28AB
		internal static void AutoGeneratedStaticCollectObjectsGatherArmyLogEntry(object o, List<object> collectedObjects)
		{
			((GatherArmyLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002A84 RID: 10884 RVA: 0x000B46B9 File Offset: 0x000B28B9
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.ArmyLeader);
			collectedObjects.Add(this.ArmyMapFaction);
			collectedObjects.Add(this.GatheringSettlement);
		}

		// Token: 0x06002A85 RID: 10885 RVA: 0x000B46E6 File Offset: 0x000B28E6
		internal static object AutoGeneratedGetMemberValueArmyLeader(object o)
		{
			return ((GatherArmyLogEntry)o).ArmyLeader;
		}

		// Token: 0x06002A86 RID: 10886 RVA: 0x000B46F3 File Offset: 0x000B28F3
		internal static object AutoGeneratedGetMemberValueArmyMapFaction(object o)
		{
			return ((GatherArmyLogEntry)o).ArmyMapFaction;
		}

		// Token: 0x06002A87 RID: 10887 RVA: 0x000B4700 File Offset: 0x000B2900
		internal static object AutoGeneratedGetMemberValueGatheringSettlement(object o)
		{
			return ((GatherArmyLogEntry)o).GatheringSettlement;
		}

		// Token: 0x17000A66 RID: 2662
		// (get) Token: 0x06002A88 RID: 10888 RVA: 0x000B470D File Offset: 0x000B290D
		public override ChatNotificationType NotificationType
		{
			get
			{
				return base.MilitaryNotification(this.ArmyLeader.Clan, null);
			}
		}

		// Token: 0x17000A67 RID: 2663
		// (get) Token: 0x06002A89 RID: 10889 RVA: 0x000B4721 File Offset: 0x000B2921
		public bool IsVisibleNotification
		{
			get
			{
				return this.ArmyMapFaction == Hero.MainHero.MapFaction;
			}
		}

		// Token: 0x06002A8A RID: 10890 RVA: 0x000B4735 File Offset: 0x000B2935
		public GatherArmyLogEntry(Army army, Settlement gatheringSettlement)
		{
			this.ArmyLeader = army.LeaderParty.LeaderHero;
			this.ArmyMapFaction = army.MapFaction;
			this.GatheringSettlement = gatheringSettlement;
		}

		// Token: 0x06002A8B RID: 10891 RVA: 0x000B4761 File Offset: 0x000B2961
		public override string ToString()
		{
			return this.GetNotificationText().ToString();
		}

		// Token: 0x06002A8C RID: 10892 RVA: 0x000B4770 File Offset: 0x000B2970
		public TextObject GetNotificationText()
		{
			TextObject textObject = new TextObject("{=Vi5Ylvr1}{LORD.NAME} is gathering army near {SETTLEMENT}", null);
			StringHelpers.SetCharacterProperties("LORD", this.ArmyLeader.CharacterObject, textObject, false);
			textObject.SetTextVariable("SETTLEMENT", this.GatheringSettlement.ToString());
			return textObject;
		}

		// Token: 0x04000CD6 RID: 3286
		[SaveableField(220)]
		public readonly Hero ArmyLeader;

		// Token: 0x04000CD7 RID: 3287
		[SaveableField(221)]
		public readonly IFaction ArmyMapFaction;

		// Token: 0x04000CD8 RID: 3288
		[SaveableField(222)]
		public readonly Settlement GatheringSettlement;
	}
}
