using System;
using System.Collections.Generic;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Localization;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002E2 RID: 738
	public class PlayerAttackAlleyLogEntry : LogEntry
	{
		// Token: 0x06002AB8 RID: 10936 RVA: 0x000B4CB8 File Offset: 0x000B2EB8
		internal static void AutoGeneratedStaticCollectObjectsPlayerAttackAlleyLogEntry(object o, List<object> collectedObjects)
		{
			((PlayerAttackAlleyLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002AB9 RID: 10937 RVA: 0x000B4CC6 File Offset: 0x000B2EC6
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.CommonAreaOwner);
			collectedObjects.Add(this.Location);
		}

		// Token: 0x06002ABA RID: 10938 RVA: 0x000B4CE7 File Offset: 0x000B2EE7
		internal static object AutoGeneratedGetMemberValueCommonAreaOwner(object o)
		{
			return ((PlayerAttackAlleyLogEntry)o).CommonAreaOwner;
		}

		// Token: 0x06002ABB RID: 10939 RVA: 0x000B4CF4 File Offset: 0x000B2EF4
		internal static object AutoGeneratedGetMemberValueLocation(object o)
		{
			return ((PlayerAttackAlleyLogEntry)o).Location;
		}

		// Token: 0x17000A71 RID: 2673
		// (get) Token: 0x06002ABC RID: 10940 RVA: 0x000B4D01 File Offset: 0x000B2F01
		public override CampaignTime KeepInHistoryTime
		{
			get
			{
				return CampaignTime.Weeks(1f);
			}
		}

		// Token: 0x06002ABD RID: 10941 RVA: 0x000B4D0D File Offset: 0x000B2F0D
		public PlayerAttackAlleyLogEntry(Hero allyOwner, Settlement location)
		{
			this.CommonAreaOwner = allyOwner;
			this.Location = location;
		}

		// Token: 0x06002ABE RID: 10942 RVA: 0x000B4D23 File Offset: 0x000B2F23
		public override ImportanceEnum GetImportanceForClan(Clan clan)
		{
			return ImportanceEnum.SlightlyImportant;
		}

		// Token: 0x06002ABF RID: 10943 RVA: 0x000B4D28 File Offset: 0x000B2F28
		public override void GetConversationScoreAndComment(Hero talkTroop, bool findString, out string comment, out ImportanceEnum score)
		{
			score = ImportanceEnum.Zero;
			comment = "";
			if (this.CommonAreaOwner == talkTroop)
			{
				score = ImportanceEnum.QuiteImportant;
				if (findString)
				{
					comment = "str_comment_common_area_fight_owner";
					return;
				}
			}
			else if (talkTroop.HomeSettlement == this.Location)
			{
				score = ImportanceEnum.ReasonablyImportant;
				if (findString)
				{
					MBTextManager.SetTextVariable("COMMON_AREA_OWNER", this.CommonAreaOwner.Name, false);
					comment = "str_comment_common_area_fight_other";
				}
			}
		}

		// Token: 0x06002AC0 RID: 10944 RVA: 0x000B4D8A File Offset: 0x000B2F8A
		public override string ToString()
		{
			TextObject textObject = new TextObject("{=!}Player attacked to common area of {OWNER_HERO} in {SETTLEMENT}.", null);
			textObject.SetTextVariable("OWNER_HERO", this.CommonAreaOwner.Name);
			textObject.SetTextVariable("SETTLEMENT", this.Location.Name);
			return textObject.ToString();
		}

		// Token: 0x04000CE2 RID: 3298
		[SaveableField(270)]
		public readonly Hero CommonAreaOwner;

		// Token: 0x04000CE3 RID: 3299
		[SaveableField(271)]
		public readonly Settlement Location;
	}
}
