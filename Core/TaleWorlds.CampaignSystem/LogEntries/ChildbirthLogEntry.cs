using System;
using System.Collections.Generic;
using Helpers;
using TaleWorlds.Core;
using TaleWorlds.Localization;
using TaleWorlds.ObjectSystem;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem.LogEntries
{
	// Token: 0x020002D6 RID: 726
	public class ChildbirthLogEntry : LogEntry, IEncyclopediaLog, IChatNotification
	{
		// Token: 0x06002A32 RID: 10802 RVA: 0x000B3A5A File Offset: 0x000B1C5A
		internal static void AutoGeneratedStaticCollectObjectsChildbirthLogEntry(object o, List<object> collectedObjects)
		{
			((ChildbirthLogEntry)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06002A33 RID: 10803 RVA: 0x000B3A68 File Offset: 0x000B1C68
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this.Mother);
			collectedObjects.Add(this.NewbornHero);
		}

		// Token: 0x06002A34 RID: 10804 RVA: 0x000B3A89 File Offset: 0x000B1C89
		internal static object AutoGeneratedGetMemberValueNewbornHero(object o)
		{
			return ((ChildbirthLogEntry)o).NewbornHero;
		}

		// Token: 0x06002A35 RID: 10805 RVA: 0x000B3A96 File Offset: 0x000B1C96
		internal static object AutoGeneratedGetMemberValueMother(object o)
		{
			return ((ChildbirthLogEntry)o).Mother;
		}

		// Token: 0x17000A5C RID: 2652
		// (get) Token: 0x06002A36 RID: 10806 RVA: 0x000B3AA3 File Offset: 0x000B1CA3
		// (set) Token: 0x06002A37 RID: 10807 RVA: 0x000B3AAB File Offset: 0x000B1CAB
		[SaveableProperty(143)]
		public Hero NewbornHero { get; private set; }

		// Token: 0x17000A5D RID: 2653
		// (get) Token: 0x06002A38 RID: 10808 RVA: 0x000B3AB4 File Offset: 0x000B1CB4
		public bool IsVisibleNotification
		{
			get
			{
				return true;
			}
		}

		// Token: 0x17000A5E RID: 2654
		// (get) Token: 0x06002A39 RID: 10809 RVA: 0x000B3AB7 File Offset: 0x000B1CB7
		public override ChatNotificationType NotificationType
		{
			get
			{
				return base.CivilianNotification(this.Mother.Clan);
			}
		}

		// Token: 0x17000A5F RID: 2655
		// (get) Token: 0x06002A3A RID: 10810 RVA: 0x000B3ACA File Offset: 0x000B1CCA
		public override CampaignTime KeepInHistoryTime
		{
			get
			{
				return CampaignTime.Days(Campaign.Current.Models.PregnancyModel.PregnancyDurationInDays * 2f);
			}
		}

		// Token: 0x17000A60 RID: 2656
		// (get) Token: 0x06002A3B RID: 10811 RVA: 0x000B3AEB File Offset: 0x000B1CEB
		// (set) Token: 0x06002A3C RID: 10812 RVA: 0x000B3AF3 File Offset: 0x000B1CF3
		public bool NeedsNewLogEntryForTwin { get; private set; }

		// Token: 0x17000A61 RID: 2657
		// (get) Token: 0x06002A3D RID: 10813 RVA: 0x000B3AFC File Offset: 0x000B1CFC
		// (set) Token: 0x06002A3E RID: 10814 RVA: 0x000B3B04 File Offset: 0x000B1D04
		public Hero NewLogTwin { get; private set; }

		// Token: 0x06002A3F RID: 10815 RVA: 0x000B3B0D File Offset: 0x000B1D0D
		public ChildbirthLogEntry(Hero mother, Hero newbornHero)
		{
			this.Mother = mother;
			this.NewbornHero = newbornHero;
		}

		// Token: 0x06002A40 RID: 10816 RVA: 0x000B3B23 File Offset: 0x000B1D23
		public override string ToString()
		{
			return this.GetEncyclopediaText().ToString();
		}

		// Token: 0x06002A41 RID: 10817 RVA: 0x000B3B30 File Offset: 0x000B1D30
		public TextObject GetNotificationText()
		{
			return this.GetEncyclopediaText();
		}

		// Token: 0x06002A42 RID: 10818 RVA: 0x000B3B38 File Offset: 0x000B1D38
		public bool IsVisibleInEncyclopediaPageOf<T>(T obj) where T : MBObjectBase
		{
			return obj == this.Mother;
		}

		// Token: 0x06002A43 RID: 10819 RVA: 0x000B3B48 File Offset: 0x000B1D48
		public TextObject GetEncyclopediaText()
		{
			TextObject textObject;
			if (this.NewbornHero != null)
			{
				textObject = GameTexts.FindText("str_notification_give_birth_single_child", null);
			}
			else
			{
				textObject = GameTexts.FindText("str_notification_give_birth_single_stillborn", null);
			}
			StringHelpers.SetCharacterProperties("MOTHER", this.Mother.CharacterObject, textObject, false);
			return textObject;
		}

		// Token: 0x04000CC0 RID: 3264
		[SaveableField(140)]
		public readonly Hero Mother;
	}
}
