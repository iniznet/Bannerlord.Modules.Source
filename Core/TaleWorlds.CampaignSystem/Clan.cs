using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Xml;
using Helpers;
using TaleWorlds.CampaignSystem.Actions;
using TaleWorlds.CampaignSystem.CharacterDevelopment;
using TaleWorlds.CampaignSystem.ComponentInterfaces;
using TaleWorlds.CampaignSystem.Party;
using TaleWorlds.CampaignSystem.Party.PartyComponents;
using TaleWorlds.CampaignSystem.Settlements;
using TaleWorlds.Core;
using TaleWorlds.Library;
using TaleWorlds.LinQuick;
using TaleWorlds.Localization;
using TaleWorlds.ObjectSystem;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.CampaignSystem
{
	// Token: 0x02000058 RID: 88
	public sealed class Clan : MBObjectBase, IFaction
	{
		// Token: 0x0600095B RID: 2395 RVA: 0x00036B85 File Offset: 0x00034D85
		internal static void AutoGeneratedStaticCollectObjectsClan(object o, List<object> collectedObjects)
		{
			((Clan)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x0600095C RID: 2396 RVA: 0x00036B94 File Offset: 0x00034D94
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
			collectedObjects.Add(this._defaultPartyTemplate);
			collectedObjects.Add(this._minorFactionCharacterTemplates);
			collectedObjects.Add(this._kingdom);
			collectedObjects.Add(this._basicTroop);
			collectedObjects.Add(this._leader);
			collectedObjects.Add(this._banner);
			collectedObjects.Add(this._home);
			collectedObjects.Add(this.Name);
			collectedObjects.Add(this.InformalName);
			collectedObjects.Add(this.Culture);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.LastFactionChangeTime, collectedObjects);
			collectedObjects.Add(this.EncyclopediaText);
			CampaignTime.AutoGeneratedStaticCollectObjectsCampaignTime(this.NotAttackableByPlayerUntilTime, collectedObjects);
		}

		// Token: 0x0600095D RID: 2397 RVA: 0x00036C4E File Offset: 0x00034E4E
		internal static object AutoGeneratedGetMemberValueName(object o)
		{
			return ((Clan)o).Name;
		}

		// Token: 0x0600095E RID: 2398 RVA: 0x00036C5B File Offset: 0x00034E5B
		internal static object AutoGeneratedGetMemberValueInformalName(object o)
		{
			return ((Clan)o).InformalName;
		}

		// Token: 0x0600095F RID: 2399 RVA: 0x00036C68 File Offset: 0x00034E68
		internal static object AutoGeneratedGetMemberValueCulture(object o)
		{
			return ((Clan)o).Culture;
		}

		// Token: 0x06000960 RID: 2400 RVA: 0x00036C75 File Offset: 0x00034E75
		internal static object AutoGeneratedGetMemberValueLastFactionChangeTime(object o)
		{
			return ((Clan)o).LastFactionChangeTime;
		}

		// Token: 0x06000961 RID: 2401 RVA: 0x00036C87 File Offset: 0x00034E87
		internal static object AutoGeneratedGetMemberValueAutoRecruitmentExpenses(object o)
		{
			return ((Clan)o).AutoRecruitmentExpenses;
		}

		// Token: 0x06000962 RID: 2402 RVA: 0x00036C99 File Offset: 0x00034E99
		internal static object AutoGeneratedGetMemberValueEncyclopediaText(object o)
		{
			return ((Clan)o).EncyclopediaText;
		}

		// Token: 0x06000963 RID: 2403 RVA: 0x00036CA6 File Offset: 0x00034EA6
		internal static object AutoGeneratedGetMemberValueIsNoble(object o)
		{
			return ((Clan)o).IsNoble;
		}

		// Token: 0x06000964 RID: 2404 RVA: 0x00036CB8 File Offset: 0x00034EB8
		internal static object AutoGeneratedGetMemberValueMercenaryAwardMultiplier(object o)
		{
			return ((Clan)o).MercenaryAwardMultiplier;
		}

		// Token: 0x06000965 RID: 2405 RVA: 0x00036CCA File Offset: 0x00034ECA
		internal static object AutoGeneratedGetMemberValueLabelColor(object o)
		{
			return ((Clan)o).LabelColor;
		}

		// Token: 0x06000966 RID: 2406 RVA: 0x00036CDC File Offset: 0x00034EDC
		internal static object AutoGeneratedGetMemberValueInitialPosition(object o)
		{
			return ((Clan)o).InitialPosition;
		}

		// Token: 0x06000967 RID: 2407 RVA: 0x00036CEE File Offset: 0x00034EEE
		internal static object AutoGeneratedGetMemberValueIsRebelClan(object o)
		{
			return ((Clan)o).IsRebelClan;
		}

		// Token: 0x06000968 RID: 2408 RVA: 0x00036D00 File Offset: 0x00034F00
		internal static object AutoGeneratedGetMemberValueIsMinorFaction(object o)
		{
			return ((Clan)o).IsMinorFaction;
		}

		// Token: 0x06000969 RID: 2409 RVA: 0x00036D12 File Offset: 0x00034F12
		internal static object AutoGeneratedGetMemberValueIsOutlaw(object o)
		{
			return ((Clan)o).IsOutlaw;
		}

		// Token: 0x0600096A RID: 2410 RVA: 0x00036D24 File Offset: 0x00034F24
		internal static object AutoGeneratedGetMemberValueIsNomad(object o)
		{
			return ((Clan)o).IsNomad;
		}

		// Token: 0x0600096B RID: 2411 RVA: 0x00036D36 File Offset: 0x00034F36
		internal static object AutoGeneratedGetMemberValueIsMafia(object o)
		{
			return ((Clan)o).IsMafia;
		}

		// Token: 0x0600096C RID: 2412 RVA: 0x00036D48 File Offset: 0x00034F48
		internal static object AutoGeneratedGetMemberValueIsClanTypeMercenary(object o)
		{
			return ((Clan)o).IsClanTypeMercenary;
		}

		// Token: 0x0600096D RID: 2413 RVA: 0x00036D5A File Offset: 0x00034F5A
		internal static object AutoGeneratedGetMemberValueIsSect(object o)
		{
			return ((Clan)o).IsSect;
		}

		// Token: 0x0600096E RID: 2414 RVA: 0x00036D6C File Offset: 0x00034F6C
		internal static object AutoGeneratedGetMemberValueIsUnderMercenaryService(object o)
		{
			return ((Clan)o).IsUnderMercenaryService;
		}

		// Token: 0x0600096F RID: 2415 RVA: 0x00036D7E File Offset: 0x00034F7E
		internal static object AutoGeneratedGetMemberValueColor(object o)
		{
			return ((Clan)o).Color;
		}

		// Token: 0x06000970 RID: 2416 RVA: 0x00036D90 File Offset: 0x00034F90
		internal static object AutoGeneratedGetMemberValueColor2(object o)
		{
			return ((Clan)o).Color2;
		}

		// Token: 0x06000971 RID: 2417 RVA: 0x00036DA2 File Offset: 0x00034FA2
		internal static object AutoGeneratedGetMemberValueAlternativeColor(object o)
		{
			return ((Clan)o).AlternativeColor;
		}

		// Token: 0x06000972 RID: 2418 RVA: 0x00036DB4 File Offset: 0x00034FB4
		internal static object AutoGeneratedGetMemberValueAlternativeColor2(object o)
		{
			return ((Clan)o).AlternativeColor2;
		}

		// Token: 0x06000973 RID: 2419 RVA: 0x00036DC6 File Offset: 0x00034FC6
		internal static object AutoGeneratedGetMemberValueBannerBackgroundColorPrimary(object o)
		{
			return ((Clan)o).BannerBackgroundColorPrimary;
		}

		// Token: 0x06000974 RID: 2420 RVA: 0x00036DD8 File Offset: 0x00034FD8
		internal static object AutoGeneratedGetMemberValueBannerBackgroundColorSecondary(object o)
		{
			return ((Clan)o).BannerBackgroundColorSecondary;
		}

		// Token: 0x06000975 RID: 2421 RVA: 0x00036DEA File Offset: 0x00034FEA
		internal static object AutoGeneratedGetMemberValueBannerIconColor(object o)
		{
			return ((Clan)o).BannerIconColor;
		}

		// Token: 0x06000976 RID: 2422 RVA: 0x00036DFC File Offset: 0x00034FFC
		internal static object AutoGeneratedGetMemberValueIsBanditFaction(object o)
		{
			return ((Clan)o).IsBanditFaction;
		}

		// Token: 0x06000977 RID: 2423 RVA: 0x00036E0E File Offset: 0x0003500E
		internal static object AutoGeneratedGetMemberValueRenown(object o)
		{
			return ((Clan)o).Renown;
		}

		// Token: 0x06000978 RID: 2424 RVA: 0x00036E20 File Offset: 0x00035020
		internal static object AutoGeneratedGetMemberValueMainHeroCrimeRating(object o)
		{
			return ((Clan)o).MainHeroCrimeRating;
		}

		// Token: 0x06000979 RID: 2425 RVA: 0x00036E32 File Offset: 0x00035032
		internal static object AutoGeneratedGetMemberValueNotAttackableByPlayerUntilTime(object o)
		{
			return ((Clan)o).NotAttackableByPlayerUntilTime;
		}

		// Token: 0x0600097A RID: 2426 RVA: 0x00036E44 File Offset: 0x00035044
		internal static object AutoGeneratedGetMemberValue_defaultPartyTemplate(object o)
		{
			return ((Clan)o)._defaultPartyTemplate;
		}

		// Token: 0x0600097B RID: 2427 RVA: 0x00036E51 File Offset: 0x00035051
		internal static object AutoGeneratedGetMemberValue_isEliminated(object o)
		{
			return ((Clan)o)._isEliminated;
		}

		// Token: 0x0600097C RID: 2428 RVA: 0x00036E63 File Offset: 0x00035063
		internal static object AutoGeneratedGetMemberValue_minorFactionCharacterTemplates(object o)
		{
			return ((Clan)o)._minorFactionCharacterTemplates;
		}

		// Token: 0x0600097D RID: 2429 RVA: 0x00036E70 File Offset: 0x00035070
		internal static object AutoGeneratedGetMemberValue_kingdom(object o)
		{
			return ((Clan)o)._kingdom;
		}

		// Token: 0x0600097E RID: 2430 RVA: 0x00036E7D File Offset: 0x0003507D
		internal static object AutoGeneratedGetMemberValue_influence(object o)
		{
			return ((Clan)o)._influence;
		}

		// Token: 0x0600097F RID: 2431 RVA: 0x00036E8F File Offset: 0x0003508F
		internal static object AutoGeneratedGetMemberValue_basicTroop(object o)
		{
			return ((Clan)o)._basicTroop;
		}

		// Token: 0x06000980 RID: 2432 RVA: 0x00036E9C File Offset: 0x0003509C
		internal static object AutoGeneratedGetMemberValue_leader(object o)
		{
			return ((Clan)o)._leader;
		}

		// Token: 0x06000981 RID: 2433 RVA: 0x00036EA9 File Offset: 0x000350A9
		internal static object AutoGeneratedGetMemberValue_banner(object o)
		{
			return ((Clan)o)._banner;
		}

		// Token: 0x06000982 RID: 2434 RVA: 0x00036EB6 File Offset: 0x000350B6
		internal static object AutoGeneratedGetMemberValue_tier(object o)
		{
			return ((Clan)o)._tier;
		}

		// Token: 0x06000983 RID: 2435 RVA: 0x00036EC8 File Offset: 0x000350C8
		internal static object AutoGeneratedGetMemberValue_aggressiveness(object o)
		{
			return ((Clan)o)._aggressiveness;
		}

		// Token: 0x06000984 RID: 2436 RVA: 0x00036EDA File Offset: 0x000350DA
		internal static object AutoGeneratedGetMemberValue_tributeWallet(object o)
		{
			return ((Clan)o)._tributeWallet;
		}

		// Token: 0x06000985 RID: 2437 RVA: 0x00036EEC File Offset: 0x000350EC
		internal static object AutoGeneratedGetMemberValue_home(object o)
		{
			return ((Clan)o)._home;
		}

		// Token: 0x06000986 RID: 2438 RVA: 0x00036EF9 File Offset: 0x000350F9
		internal static object AutoGeneratedGetMemberValue_clanDebtToKingdom(object o)
		{
			return ((Clan)o)._clanDebtToKingdom;
		}

		// Token: 0x170001E5 RID: 485
		// (get) Token: 0x06000987 RID: 2439 RVA: 0x00036F0B File Offset: 0x0003510B
		// (set) Token: 0x06000988 RID: 2440 RVA: 0x00036F13 File Offset: 0x00035113
		[SaveableProperty(51)]
		public TextObject Name { get; private set; }

		// Token: 0x170001E6 RID: 486
		// (get) Token: 0x06000989 RID: 2441 RVA: 0x00036F1C File Offset: 0x0003511C
		// (set) Token: 0x0600098A RID: 2442 RVA: 0x00036F24 File Offset: 0x00035124
		[SaveableProperty(52)]
		public TextObject InformalName { get; private set; }

		// Token: 0x170001E7 RID: 487
		// (get) Token: 0x0600098B RID: 2443 RVA: 0x00036F30 File Offset: 0x00035130
		public TextObject FullName
		{
			get
			{
				TextObject textObject = TextObject.Empty;
				int minClanTier = Campaign.Current.Models.ClanTierModel.MinClanTier;
				if (minClanTier >= this.Tier)
				{
					textObject = new TextObject("{=aZne44IB}{CLAN_NAME} Family", null);
				}
				else if (minClanTier + 1 == this.Tier)
				{
					textObject = new TextObject("{=ztXDDMSI}{CLAN_NAME} Clan", null);
				}
				else if (minClanTier + 2 == this.Tier)
				{
					textObject = new TextObject("{=UnjmmLFm}{CLAN_NAME} Noble Clan", null);
				}
				else
				{
					textObject = new TextObject("{=iOrtiVLt}House of {CLAN_NAME}", null);
				}
				textObject.SetTextVariable("CLAN_NAME", this.Name);
				return textObject;
			}
		}

		// Token: 0x170001E8 RID: 488
		// (get) Token: 0x0600098C RID: 2444 RVA: 0x00036FC0 File Offset: 0x000351C0
		// (set) Token: 0x0600098D RID: 2445 RVA: 0x00036FC8 File Offset: 0x000351C8
		[SaveableProperty(53)]
		public CultureObject Culture { get; set; }

		// Token: 0x170001E9 RID: 489
		// (get) Token: 0x0600098E RID: 2446 RVA: 0x00036FD1 File Offset: 0x000351D1
		// (set) Token: 0x0600098F RID: 2447 RVA: 0x00036FD9 File Offset: 0x000351D9
		[SaveableProperty(55)]
		public CampaignTime LastFactionChangeTime { get; set; }

		// Token: 0x170001EA RID: 490
		// (get) Token: 0x06000990 RID: 2448 RVA: 0x00036FE2 File Offset: 0x000351E2
		public PartyTemplateObject DefaultPartyTemplate
		{
			get
			{
				if (this._defaultPartyTemplate != null)
				{
					return this._defaultPartyTemplate;
				}
				return this.Culture.DefaultPartyTemplate;
			}
		}

		// Token: 0x170001EB RID: 491
		// (get) Token: 0x06000991 RID: 2449 RVA: 0x00036FFE File Offset: 0x000351FE
		// (set) Token: 0x06000992 RID: 2450 RVA: 0x00037006 File Offset: 0x00035206
		[SaveableProperty(58)]
		public int AutoRecruitmentExpenses { get; set; }

		// Token: 0x170001EC RID: 492
		// (get) Token: 0x06000993 RID: 2451 RVA: 0x0003700F File Offset: 0x0003520F
		// (set) Token: 0x06000994 RID: 2452 RVA: 0x00037017 File Offset: 0x00035217
		[SaveableProperty(56)]
		public TextObject EncyclopediaText { get; private set; }

		// Token: 0x170001ED RID: 493
		// (get) Token: 0x06000995 RID: 2453 RVA: 0x00037020 File Offset: 0x00035220
		// (set) Token: 0x06000996 RID: 2454 RVA: 0x00037028 File Offset: 0x00035228
		[SaveableProperty(140)]
		public bool IsNoble { get; set; }

		// Token: 0x170001EE RID: 494
		// (get) Token: 0x06000997 RID: 2455 RVA: 0x00037031 File Offset: 0x00035231
		public bool IsEliminated
		{
			get
			{
				return this._isEliminated;
			}
		}

		// Token: 0x170001EF RID: 495
		// (get) Token: 0x06000998 RID: 2456 RVA: 0x00037039 File Offset: 0x00035239
		public IList<CharacterObject> MinorFactionCharacterTemplates
		{
			get
			{
				return this._minorFactionCharacterTemplates;
			}
		}

		// Token: 0x170001F0 RID: 496
		// (get) Token: 0x06000999 RID: 2457 RVA: 0x00037041 File Offset: 0x00035241
		public string EncyclopediaLink
		{
			get
			{
				return Campaign.Current.EncyclopediaManager.GetIdentifier(typeof(Clan)) + "-" + base.StringId;
			}
		}

		// Token: 0x170001F1 RID: 497
		// (get) Token: 0x0600099A RID: 2458 RVA: 0x0003706C File Offset: 0x0003526C
		public bool IsNeutralClan
		{
			get
			{
				return this == CampaignData.NeutralFaction;
			}
		}

		// Token: 0x170001F2 RID: 498
		// (get) Token: 0x0600099B RID: 2459 RVA: 0x00037076 File Offset: 0x00035276
		public TextObject EncyclopediaLinkWithName
		{
			get
			{
				return HyperlinkTexts.GetClanHyperlinkText(this.EncyclopediaLink, this.Name);
			}
		}

		// Token: 0x170001F3 RID: 499
		// (get) Token: 0x0600099C RID: 2460 RVA: 0x00037089 File Offset: 0x00035289
		// (set) Token: 0x0600099D RID: 2461 RVA: 0x00037091 File Offset: 0x00035291
		public Kingdom Kingdom
		{
			get
			{
				return this._kingdom;
			}
			set
			{
				if (this._kingdom != value)
				{
					this.SetKingdomInternal(value);
				}
			}
		}

		// Token: 0x170001F4 RID: 500
		// (get) Token: 0x0600099E RID: 2462 RVA: 0x000370A3 File Offset: 0x000352A3
		public IEnumerable<CharacterObject> DungeonPrisonersOfClan
		{
			get
			{
				foreach (Town town in this.Fiefs)
				{
					foreach (CharacterObject characterObject in town.Settlement.Party.PrisonerHeroes)
					{
						yield return characterObject;
					}
					IEnumerator<CharacterObject> enumerator2 = null;
				}
				List<Town>.Enumerator enumerator = default(List<Town>.Enumerator);
				yield break;
				yield break;
			}
		}

		// Token: 0x170001F5 RID: 501
		// (get) Token: 0x0600099F RID: 2463 RVA: 0x000370B3 File Offset: 0x000352B3
		public MBReadOnlyList<Town> Fiefs
		{
			get
			{
				return this._fiefsCache;
			}
		}

		// Token: 0x170001F6 RID: 502
		// (get) Token: 0x060009A0 RID: 2464 RVA: 0x000370BB File Offset: 0x000352BB
		public MBReadOnlyList<Village> Villages
		{
			get
			{
				return this._villagesCache;
			}
		}

		// Token: 0x170001F7 RID: 503
		// (get) Token: 0x060009A1 RID: 2465 RVA: 0x000370C3 File Offset: 0x000352C3
		public MBReadOnlyList<Settlement> Settlements
		{
			get
			{
				return this._settlementsCache;
			}
		}

		// Token: 0x170001F8 RID: 504
		// (get) Token: 0x060009A2 RID: 2466 RVA: 0x000370CB File Offset: 0x000352CB
		public MBReadOnlyList<Hero> SupporterNotables
		{
			get
			{
				return this._supporterNotablesCache;
			}
		}

		// Token: 0x170001F9 RID: 505
		// (get) Token: 0x060009A3 RID: 2467 RVA: 0x000370D3 File Offset: 0x000352D3
		public MBReadOnlyList<Hero> Lords
		{
			get
			{
				return this._lordsCache;
			}
		}

		// Token: 0x170001FA RID: 506
		// (get) Token: 0x060009A4 RID: 2468 RVA: 0x000370DB File Offset: 0x000352DB
		public MBReadOnlyList<Hero> Heroes
		{
			get
			{
				return this._heroesCache;
			}
		}

		// Token: 0x170001FB RID: 507
		// (get) Token: 0x060009A5 RID: 2469 RVA: 0x000370E3 File Offset: 0x000352E3
		public MBReadOnlyList<Hero> Companions
		{
			get
			{
				return this._companionsCache;
			}
		}

		// Token: 0x170001FC RID: 508
		// (get) Token: 0x060009A6 RID: 2470 RVA: 0x000370EB File Offset: 0x000352EB
		public MBReadOnlyList<WarPartyComponent> WarPartyComponents
		{
			get
			{
				return this._warPartyComponentsCache;
			}
		}

		// Token: 0x170001FD RID: 509
		// (get) Token: 0x060009A7 RID: 2471 RVA: 0x000370F3 File Offset: 0x000352F3
		// (set) Token: 0x060009A8 RID: 2472 RVA: 0x000370FB File Offset: 0x000352FB
		public float Influence
		{
			get
			{
				return this._influence;
			}
			set
			{
				if (value < this._influence && this.Leader != null)
				{
					SkillLevelingManager.OnInfluenceSpent(this.Leader, value - this._influence);
				}
				this._influence = value;
			}
		}

		// Token: 0x170001FE RID: 510
		// (get) Token: 0x060009A9 RID: 2473 RVA: 0x00037128 File Offset: 0x00035328
		public ExplainedNumber InfluenceChangeExplained
		{
			get
			{
				return Campaign.Current.Models.ClanPoliticsModel.CalculateInfluenceChange(this, true);
			}
		}

		// Token: 0x170001FF RID: 511
		// (get) Token: 0x060009AA RID: 2474 RVA: 0x00037140 File Offset: 0x00035340
		// (set) Token: 0x060009AB RID: 2475 RVA: 0x00037148 File Offset: 0x00035348
		[CachedData]
		public float TotalStrength { get; private set; }

		// Token: 0x17000200 RID: 512
		// (get) Token: 0x060009AC RID: 2476 RVA: 0x00037151 File Offset: 0x00035351
		// (set) Token: 0x060009AD RID: 2477 RVA: 0x00037159 File Offset: 0x00035359
		[SaveableProperty(65)]
		public int MercenaryAwardMultiplier { get; set; }

		// Token: 0x17000201 RID: 513
		// (get) Token: 0x060009AE RID: 2478 RVA: 0x00037162 File Offset: 0x00035362
		public bool IsMapFaction
		{
			get
			{
				return this._kingdom == null;
			}
		}

		// Token: 0x17000202 RID: 514
		// (get) Token: 0x060009AF RID: 2479 RVA: 0x0003716D File Offset: 0x0003536D
		// (set) Token: 0x060009B0 RID: 2480 RVA: 0x00037175 File Offset: 0x00035375
		[SaveableProperty(66)]
		public uint LabelColor { get; set; }

		// Token: 0x17000203 RID: 515
		// (get) Token: 0x060009B1 RID: 2481 RVA: 0x0003717E File Offset: 0x0003537E
		// (set) Token: 0x060009B2 RID: 2482 RVA: 0x00037186 File Offset: 0x00035386
		[SaveableProperty(67)]
		public Vec2 InitialPosition { get; set; }

		// Token: 0x17000204 RID: 516
		// (get) Token: 0x060009B3 RID: 2483 RVA: 0x0003718F File Offset: 0x0003538F
		// (set) Token: 0x060009B4 RID: 2484 RVA: 0x00037197 File Offset: 0x00035397
		[SaveableProperty(68)]
		public bool IsRebelClan { get; set; }

		// Token: 0x17000205 RID: 517
		// (get) Token: 0x060009B5 RID: 2485 RVA: 0x000371A0 File Offset: 0x000353A0
		// (set) Token: 0x060009B6 RID: 2486 RVA: 0x000371A8 File Offset: 0x000353A8
		[SaveableProperty(69)]
		public bool IsMinorFaction { get; private set; }

		// Token: 0x17000206 RID: 518
		// (get) Token: 0x060009B7 RID: 2487 RVA: 0x000371B1 File Offset: 0x000353B1
		// (set) Token: 0x060009B8 RID: 2488 RVA: 0x000371B9 File Offset: 0x000353B9
		[SaveableProperty(70)]
		public bool IsOutlaw { get; private set; }

		// Token: 0x17000207 RID: 519
		// (get) Token: 0x060009B9 RID: 2489 RVA: 0x000371C2 File Offset: 0x000353C2
		// (set) Token: 0x060009BA RID: 2490 RVA: 0x000371CA File Offset: 0x000353CA
		[SaveableProperty(71)]
		public bool IsNomad { get; private set; }

		// Token: 0x17000208 RID: 520
		// (get) Token: 0x060009BB RID: 2491 RVA: 0x000371D3 File Offset: 0x000353D3
		// (set) Token: 0x060009BC RID: 2492 RVA: 0x000371DB File Offset: 0x000353DB
		[SaveableProperty(72)]
		public bool IsMafia { get; private set; }

		// Token: 0x17000209 RID: 521
		// (get) Token: 0x060009BD RID: 2493 RVA: 0x000371E4 File Offset: 0x000353E4
		// (set) Token: 0x060009BE RID: 2494 RVA: 0x000371EC File Offset: 0x000353EC
		[SaveableProperty(73)]
		public bool IsClanTypeMercenary { get; private set; }

		// Token: 0x1700020A RID: 522
		// (get) Token: 0x060009BF RID: 2495 RVA: 0x000371F5 File Offset: 0x000353F5
		// (set) Token: 0x060009C0 RID: 2496 RVA: 0x000371FD File Offset: 0x000353FD
		[SaveableProperty(74)]
		public bool IsSect { get; private set; }

		// Token: 0x1700020B RID: 523
		// (get) Token: 0x060009C1 RID: 2497 RVA: 0x00037206 File Offset: 0x00035406
		// (set) Token: 0x060009C2 RID: 2498 RVA: 0x0003720E File Offset: 0x0003540E
		[SaveableProperty(75)]
		public bool IsUnderMercenaryService { get; private set; }

		// Token: 0x1700020C RID: 524
		// (get) Token: 0x060009C3 RID: 2499 RVA: 0x00037217 File Offset: 0x00035417
		// (set) Token: 0x060009C4 RID: 2500 RVA: 0x0003721F File Offset: 0x0003541F
		[SaveableProperty(76)]
		public uint Color { get; set; }

		// Token: 0x1700020D RID: 525
		// (get) Token: 0x060009C5 RID: 2501 RVA: 0x00037228 File Offset: 0x00035428
		// (set) Token: 0x060009C6 RID: 2502 RVA: 0x00037230 File Offset: 0x00035430
		[SaveableProperty(77)]
		public uint Color2 { get; set; }

		// Token: 0x1700020E RID: 526
		// (get) Token: 0x060009C7 RID: 2503 RVA: 0x00037239 File Offset: 0x00035439
		// (set) Token: 0x060009C8 RID: 2504 RVA: 0x00037241 File Offset: 0x00035441
		[SaveableProperty(78)]
		public uint AlternativeColor { get; set; }

		// Token: 0x1700020F RID: 527
		// (get) Token: 0x060009C9 RID: 2505 RVA: 0x0003724A File Offset: 0x0003544A
		// (set) Token: 0x060009CA RID: 2506 RVA: 0x00037252 File Offset: 0x00035452
		[SaveableProperty(79)]
		public uint AlternativeColor2 { get; set; }

		// Token: 0x17000210 RID: 528
		// (get) Token: 0x060009CB RID: 2507 RVA: 0x0003725B File Offset: 0x0003545B
		// (set) Token: 0x060009CC RID: 2508 RVA: 0x00037263 File Offset: 0x00035463
		[SaveableProperty(111)]
		private uint BannerBackgroundColorPrimary { get; set; }

		// Token: 0x17000211 RID: 529
		// (get) Token: 0x060009CD RID: 2509 RVA: 0x0003726C File Offset: 0x0003546C
		// (set) Token: 0x060009CE RID: 2510 RVA: 0x00037274 File Offset: 0x00035474
		[SaveableProperty(112)]
		private uint BannerBackgroundColorSecondary { get; set; }

		// Token: 0x17000212 RID: 530
		// (get) Token: 0x060009CF RID: 2511 RVA: 0x0003727D File Offset: 0x0003547D
		// (set) Token: 0x060009D0 RID: 2512 RVA: 0x00037285 File Offset: 0x00035485
		[SaveableProperty(113)]
		private uint BannerIconColor { get; set; }

		// Token: 0x17000213 RID: 531
		// (get) Token: 0x060009D1 RID: 2513 RVA: 0x0003728E File Offset: 0x0003548E
		// (set) Token: 0x060009D2 RID: 2514 RVA: 0x00037296 File Offset: 0x00035496
		[CachedData]
		private bool _midPointCalculated { get; set; }

		// Token: 0x17000214 RID: 532
		// (get) Token: 0x060009D3 RID: 2515 RVA: 0x0003729F File Offset: 0x0003549F
		// (set) Token: 0x060009D4 RID: 2516 RVA: 0x000372B6 File Offset: 0x000354B6
		public CharacterObject BasicTroop
		{
			get
			{
				return this._basicTroop ?? this.Culture.BasicTroop;
			}
			set
			{
				this._basicTroop = value;
			}
		}

		// Token: 0x17000215 RID: 533
		// (get) Token: 0x060009D5 RID: 2517 RVA: 0x000372BF File Offset: 0x000354BF
		public static Clan PlayerClan
		{
			get
			{
				return Campaign.Current.PlayerDefaultFaction;
			}
		}

		// Token: 0x17000216 RID: 534
		// (get) Token: 0x060009D6 RID: 2518 RVA: 0x000372CB File Offset: 0x000354CB
		public Hero Leader
		{
			get
			{
				return this._leader;
			}
		}

		// Token: 0x17000217 RID: 535
		// (get) Token: 0x060009D7 RID: 2519 RVA: 0x000372D3 File Offset: 0x000354D3
		public int Gold
		{
			get
			{
				Hero leader = this.Leader;
				if (leader == null)
				{
					return 0;
				}
				return leader.Gold;
			}
		}

		// Token: 0x17000218 RID: 536
		// (get) Token: 0x060009D8 RID: 2520 RVA: 0x000372E6 File Offset: 0x000354E6
		// (set) Token: 0x060009D9 RID: 2521 RVA: 0x00037310 File Offset: 0x00035510
		public Banner Banner
		{
			get
			{
				if (this.Kingdom == null || this.Kingdom.RulingClan != this)
				{
					return this._banner;
				}
				return this.Kingdom.Banner;
			}
			private set
			{
				this._banner = value;
			}
		}

		// Token: 0x17000219 RID: 537
		// (get) Token: 0x060009DA RID: 2522 RVA: 0x00037319 File Offset: 0x00035519
		// (set) Token: 0x060009DB RID: 2523 RVA: 0x00037321 File Offset: 0x00035521
		[SaveableProperty(85)]
		public bool IsBanditFaction { get; private set; }

		// Token: 0x1700021A RID: 538
		// (get) Token: 0x060009DC RID: 2524 RVA: 0x0003732A File Offset: 0x0003552A
		bool IFaction.IsKingdomFaction
		{
			get
			{
				return false;
			}
		}

		// Token: 0x1700021B RID: 539
		// (get) Token: 0x060009DD RID: 2525 RVA: 0x0003732D File Offset: 0x0003552D
		public bool IsClan
		{
			get
			{
				return true;
			}
		}

		// Token: 0x1700021C RID: 540
		// (get) Token: 0x060009DE RID: 2526 RVA: 0x00037330 File Offset: 0x00035530
		// (set) Token: 0x060009DF RID: 2527 RVA: 0x00037338 File Offset: 0x00035538
		[SaveableProperty(88)]
		public float Renown { get; set; }

		// Token: 0x1700021D RID: 541
		// (get) Token: 0x060009E0 RID: 2528 RVA: 0x00037341 File Offset: 0x00035541
		// (set) Token: 0x060009E1 RID: 2529 RVA: 0x00037349 File Offset: 0x00035549
		[SaveableProperty(89)]
		public float MainHeroCrimeRating { get; set; }

		// Token: 0x1700021E RID: 542
		// (get) Token: 0x060009E2 RID: 2530 RVA: 0x00037354 File Offset: 0x00035554
		public float DailyCrimeRatingChange
		{
			get
			{
				return Campaign.Current.Models.CrimeModel.GetDailyCrimeRatingChange(this, false).ResultNumber;
			}
		}

		// Token: 0x1700021F RID: 543
		// (get) Token: 0x060009E3 RID: 2531 RVA: 0x0003737F File Offset: 0x0003557F
		public ExplainedNumber DailyCrimeRatingChangeExplained
		{
			get
			{
				return Campaign.Current.Models.CrimeModel.GetDailyCrimeRatingChange(this, true);
			}
		}

		// Token: 0x17000220 RID: 544
		// (get) Token: 0x060009E4 RID: 2532 RVA: 0x00037397 File Offset: 0x00035597
		// (set) Token: 0x060009E5 RID: 2533 RVA: 0x000373A0 File Offset: 0x000355A0
		public int Tier
		{
			get
			{
				return this._tier;
			}
			private set
			{
				int minClanTier = Campaign.Current.Models.ClanTierModel.MinClanTier;
				int maxClanTier = Campaign.Current.Models.ClanTierModel.MaxClanTier;
				if (value > maxClanTier)
				{
					value = maxClanTier;
				}
				else if (value < minClanTier)
				{
					value = minClanTier;
				}
				this._tier = value;
			}
		}

		// Token: 0x17000221 RID: 545
		// (get) Token: 0x060009E6 RID: 2534 RVA: 0x000373EE File Offset: 0x000355EE
		public IFaction MapFaction
		{
			get
			{
				if (this.Kingdom != null)
				{
					return this.Kingdom;
				}
				return this;
			}
		}

		// Token: 0x17000222 RID: 546
		// (get) Token: 0x060009E7 RID: 2535 RVA: 0x00037400 File Offset: 0x00035600
		// (set) Token: 0x060009E8 RID: 2536 RVA: 0x00037408 File Offset: 0x00035608
		[SaveableProperty(100)]
		public CampaignTime NotAttackableByPlayerUntilTime { get; set; }

		// Token: 0x17000223 RID: 547
		// (get) Token: 0x060009E9 RID: 2537 RVA: 0x00037411 File Offset: 0x00035611
		// (set) Token: 0x060009EA RID: 2538 RVA: 0x00037419 File Offset: 0x00035619
		public float Aggressiveness
		{
			get
			{
				return this._aggressiveness;
			}
			internal set
			{
				this._aggressiveness = MathF.Clamp(value, 0f, 100f);
			}
		}

		// Token: 0x17000224 RID: 548
		// (get) Token: 0x060009EB RID: 2539 RVA: 0x00037431 File Offset: 0x00035631
		// (set) Token: 0x060009EC RID: 2540 RVA: 0x00037439 File Offset: 0x00035639
		public int TributeWallet
		{
			get
			{
				return this._tributeWallet;
			}
			set
			{
				this._tributeWallet = value;
			}
		}

		// Token: 0x17000225 RID: 549
		// (get) Token: 0x060009ED RID: 2541 RVA: 0x00037442 File Offset: 0x00035642
		// (set) Token: 0x060009EE RID: 2542 RVA: 0x0003744A File Offset: 0x0003564A
		public Settlement HomeSettlement
		{
			get
			{
				return this._home;
			}
			private set
			{
				this._home = value;
			}
		}

		// Token: 0x17000226 RID: 550
		// (get) Token: 0x060009EF RID: 2543 RVA: 0x00037455 File Offset: 0x00035655
		// (set) Token: 0x060009F0 RID: 2544 RVA: 0x0003745D File Offset: 0x0003565D
		public int DebtToKingdom
		{
			get
			{
				return this._clanDebtToKingdom;
			}
			set
			{
				this._clanDebtToKingdom = value;
			}
		}

		// Token: 0x060009F1 RID: 2545 RVA: 0x00037468 File Offset: 0x00035668
		internal void UpdateStrength()
		{
			this.TotalStrength = 0f;
			foreach (WarPartyComponent warPartyComponent in this._warPartyComponentsCache)
			{
				this.TotalStrength += warPartyComponent.MobileParty.Party.TotalStrength;
			}
			foreach (Town town in this.Fiefs)
			{
				if (town.GarrisonParty != null)
				{
					this.TotalStrength += town.GarrisonParty.Party.TotalStrength;
				}
			}
		}

		// Token: 0x17000227 RID: 551
		// (get) Token: 0x060009F2 RID: 2546 RVA: 0x0003753C File Offset: 0x0003573C
		public IEnumerable<StanceLink> Stances
		{
			get
			{
				return this._stances;
			}
		}

		// Token: 0x17000228 RID: 552
		// (get) Token: 0x060009F3 RID: 2547 RVA: 0x00037544 File Offset: 0x00035744
		public int RenownRequirementForNextTier
		{
			get
			{
				return Campaign.Current.Models.ClanTierModel.GetRequiredRenownForTier(this.Tier + 1);
			}
		}

		// Token: 0x17000229 RID: 553
		// (get) Token: 0x060009F4 RID: 2548 RVA: 0x00037562 File Offset: 0x00035762
		public int CompanionLimit
		{
			get
			{
				return Campaign.Current.Models.ClanTierModel.GetCompanionLimit(this);
			}
		}

		// Token: 0x1700022A RID: 554
		// (get) Token: 0x060009F5 RID: 2549 RVA: 0x00037579 File Offset: 0x00035779
		public float DistanceToClosestNonAllyFortification
		{
			get
			{
				if (this._distanceToClosestNonAllyFortificationCacheDirty)
				{
					this._distanceToClosestNonAllyFortificationCache = FactionHelper.GetDistanceToClosestNonAllyFortificationOfFaction(this);
					this._distanceToClosestNonAllyFortificationCacheDirty = false;
				}
				return this._distanceToClosestNonAllyFortificationCache;
			}
		}

		// Token: 0x1700022B RID: 555
		// (get) Token: 0x060009F6 RID: 2550 RVA: 0x0003759C File Offset: 0x0003579C
		public int CommanderLimit
		{
			get
			{
				return Campaign.Current.Models.ClanTierModel.GetPartyLimitForTier(this, this.Tier);
			}
		}

		// Token: 0x060009F7 RID: 2551 RVA: 0x000375B9 File Offset: 0x000357B9
		public bool IsAtWarWith(IFaction other)
		{
			return FactionManager.IsAtWarAgainstFaction(this, other);
		}

		// Token: 0x060009F8 RID: 2552 RVA: 0x000375C2 File Offset: 0x000357C2
		private void UpdateFactionMidSettlement()
		{
			this._clanMidSettlement = FactionHelper.FactionMidSettlement(this);
			this._midPointCalculated = this._clanMidSettlement != null;
		}

		// Token: 0x1700022C RID: 556
		// (get) Token: 0x060009F9 RID: 2553 RVA: 0x000375DF File Offset: 0x000357DF
		public Settlement FactionMidSettlement
		{
			get
			{
				if (!this._midPointCalculated)
				{
					this.UpdateFactionMidSettlement();
				}
				return this._clanMidSettlement;
			}
		}

		// Token: 0x060009FA RID: 2554 RVA: 0x000375F8 File Offset: 0x000357F8
		private void InitMembers()
		{
			this._companionsCache = new MBList<Hero>();
			this._warPartyComponentsCache = new MBList<WarPartyComponent>();
			this._stances = new List<StanceLink>();
			this._supporterNotablesCache = new MBList<Hero>();
			this._lordsCache = new MBList<Hero>();
			this._heroesCache = new MBList<Hero>();
			this._villagesCache = new MBList<Village>();
			this._fiefsCache = new MBList<Town>();
			this._settlementsCache = new MBList<Settlement>();
		}

		// Token: 0x060009FB RID: 2555 RVA: 0x00037668 File Offset: 0x00035868
		public Clan()
		{
			this.InitMembers();
			this._isEliminated = false;
			this.NotAttackableByPlayerUntilTime = CampaignTime.Zero;
		}

		// Token: 0x060009FC RID: 2556 RVA: 0x00037690 File Offset: 0x00035890
		public static Clan CreateClan(string stringID)
		{
			stringID = Campaign.Current.CampaignObjectManager.FindNextUniqueStringId<Clan>(stringID);
			Clan clan = new Clan();
			clan.StringId = stringID;
			Campaign.Current.CampaignObjectManager.AddClan(clan);
			return clan;
		}

		// Token: 0x060009FD RID: 2557 RVA: 0x000376CD File Offset: 0x000358CD
		public void InitializeClan(TextObject name, TextObject informalName, CultureObject culture, Banner banner, Vec2 initialPosition = default(Vec2), bool isDeserialize = false)
		{
			this.ChangeClanName(name, informalName);
			this.Culture = culture;
			this.Banner = banner;
			if (!isDeserialize)
			{
				this.ValidateInitialPosition(initialPosition);
			}
		}

		// Token: 0x060009FE RID: 2558 RVA: 0x000376F4 File Offset: 0x000358F4
		protected override void PreAfterLoad()
		{
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("e1.8.0.0", 17949))
			{
				Hero leader = this.Leader;
				this.IsNoble = leader != null && leader.IsNobleForOldSaves;
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("v1.1.0", 17949) && this.Leader != null && this.Leader.Clan != this)
			{
				ChangeClanLeaderAction.ApplyWithoutSelectedNewLeader(this);
			}
			Kingdom kingdom = this._kingdom;
			if (kingdom != null)
			{
				kingdom.AddClanInternal(this);
			}
			this._midPointCalculated = this._clanMidSettlement != null;
			if (this.HomeSettlement == null && !this.IsBanditFaction && !this.IsNeutralClan)
			{
				this.UpdateHomeSettlement(null);
			}
			this.ValidateInitialPosition(this.InitialPosition);
			this.UpdateBannerColorsAccordingToKingdom();
		}

		// Token: 0x060009FF RID: 2559 RVA: 0x000377CC File Offset: 0x000359CC
		protected override void AfterLoad()
		{
			this.UpdateStrength();
			if (MBSaveLoad.LastLoadedGameVersion <= ApplicationVersion.FromString("e1.8.0.0", 17949) && this.Kingdom != null)
			{
				FactionHelper.AdjustFactionStancesForClanJoiningKingdom(this, this.Kingdom);
			}
			if (MBSaveLoad.IsUpdatingGameVersion && MBSaveLoad.LastLoadedGameVersion < ApplicationVersion.FromString("v1.1.3", 17949) && this.Kingdom == null && this.IsUnderMercenaryService)
			{
				this.EndMercenaryService(true);
			}
		}

		// Token: 0x06000A00 RID: 2560 RVA: 0x00037848 File Offset: 0x00035A48
		public override void Deserialize(MBObjectManager objectManager, XmlNode node)
		{
			base.Deserialize(objectManager, node);
			this.SetLeader(objectManager.ReadObjectReferenceFromXml("owner", typeof(Hero), node) as Hero);
			this.Kingdom = (Kingdom)objectManager.ReadObjectReferenceFromXml("super_faction", typeof(Kingdom), node);
			this.Tier = ((node.Attributes["tier"] == null) ? 1 : Convert.ToInt32(node.Attributes["tier"].Value));
			this.Renown = (float)Campaign.Current.Models.ClanTierModel.CalculateInitialRenown(this);
			this.InitializeClan(new TextObject(node.Attributes["name"].Value, null), (node.Attributes["short_name"] != null) ? new TextObject(node.Attributes["short_name"].Value, null) : new TextObject(node.Attributes["name"].Value, null), (CultureObject)objectManager.ReadObjectReferenceFromXml("culture", typeof(CultureObject), node), null, default(Vec2), true);
			XmlNode xmlNode = node.Attributes["is_noble"];
			if (xmlNode != null)
			{
				this.IsNoble = Convert.ToBoolean(xmlNode.InnerText);
			}
			this.LabelColor = ((node.Attributes["label_color"] == null) ? 0U : Convert.ToUInt32(node.Attributes["label_color"].Value, 16));
			this.Color = ((node.Attributes["color"] == null) ? 4291609515U : Convert.ToUInt32(node.Attributes["color"].Value, 16));
			this.Color2 = ((node.Attributes["color2"] == null) ? 4291609515U : Convert.ToUInt32(node.Attributes["color2"].Value, 16));
			this.AlternativeColor = ((node.Attributes["alternative_color"] == null) ? 4291609515U : Convert.ToUInt32(node.Attributes["alternative_color"].Value, 16));
			this.AlternativeColor2 = ((node.Attributes["alternative_color2"] == null) ? 4291609515U : Convert.ToUInt32(node.Attributes["alternative_color2"].Value, 16));
			if (node.Attributes["initial_posX"] != null && node.Attributes["initial_posY"] != null)
			{
				this.InitialPosition = new Vec2((float)Convert.ToDouble(node.Attributes["initial_posX"].Value), (float)Convert.ToDouble(node.Attributes["initial_posY"].Value));
			}
			this.IsBanditFaction = node.Attributes["is_bandit"] != null && Convert.ToBoolean(node.Attributes["is_bandit"].Value);
			this.IsMinorFaction = node.Attributes["is_minor_faction"] != null && Convert.ToBoolean(node.Attributes["is_minor_faction"].Value);
			this.IsOutlaw = node.Attributes["is_outlaw"] != null && Convert.ToBoolean(node.Attributes["is_outlaw"].Value);
			this.IsSect = node.Attributes["is_sect"] != null && Convert.ToBoolean(node.Attributes["is_sect"].Value);
			this.IsMafia = node.Attributes["is_mafia"] != null && Convert.ToBoolean(node.Attributes["is_mafia"].Value);
			this.IsClanTypeMercenary = node.Attributes["is_clan_type_mercenary"] != null && Convert.ToBoolean(node.Attributes["is_clan_type_mercenary"].Value);
			this.IsNomad = node.Attributes["is_nomad"] != null && Convert.ToBoolean(node.Attributes["is_nomad"].Value);
			this._defaultPartyTemplate = (PartyTemplateObject)objectManager.ReadObjectReferenceFromXml("default_party_template", typeof(PartyTemplateObject), node);
			this.EncyclopediaText = ((node.Attributes["text"] != null) ? new TextObject(node.Attributes["text"].Value, null) : TextObject.Empty);
			if (node.Attributes["banner_key"] != null)
			{
				this._banner = new Banner();
				this._banner.Deserialize(node.Attributes["banner_key"].Value);
			}
			else
			{
				this._banner = Banner.CreateRandomClanBanner(base.StringId.GetDeterministicHashCode());
			}
			this.BannerBackgroundColorPrimary = this._banner.GetPrimaryColor();
			this.BannerBackgroundColorSecondary = this._banner.GetSecondaryColor();
			this.BannerIconColor = this._banner.GetFirstIconColor();
			this.UpdateBannerColorsAccordingToKingdom();
			this._minorFactionCharacterTemplates = new List<CharacterObject>();
			foreach (object obj in node.ChildNodes)
			{
				XmlNode xmlNode2 = (XmlNode)obj;
				if (xmlNode2.Name == "minor_faction_character_templates")
				{
					using (IEnumerator enumerator2 = xmlNode2.ChildNodes.GetEnumerator())
					{
						while (enumerator2.MoveNext())
						{
							object obj2 = enumerator2.Current;
							XmlNode xmlNode3 = (XmlNode)obj2;
							CharacterObject characterObject = objectManager.ReadObjectReferenceFromXml("id", typeof(CharacterObject), xmlNode3) as CharacterObject;
							this._minorFactionCharacterTemplates.Add(characterObject);
						}
						continue;
					}
				}
				if (xmlNode2.Name == "relationship")
				{
					IFaction faction;
					if (xmlNode2.Attributes["clan"] != null)
					{
						faction = (Clan)objectManager.ReadObjectReferenceFromXml("clan", typeof(Clan), xmlNode2);
					}
					else
					{
						faction = (Kingdom)objectManager.ReadObjectReferenceFromXml("kingdom", typeof(Kingdom), xmlNode2);
					}
					int num = Convert.ToInt32(xmlNode2.Attributes["value"].InnerText);
					if (num > 0)
					{
						FactionManager.DeclareAlliance(this, faction);
					}
					else if (num < 0)
					{
						FactionManager.DeclareWar(this, faction, false);
					}
					else
					{
						FactionManager.SetNeutral(this, faction);
					}
				}
			}
		}

		// Token: 0x06000A01 RID: 2561 RVA: 0x00037F2C File Offset: 0x0003612C
		protected override void OnBeforeLoad()
		{
		}

		// Token: 0x06000A02 RID: 2562 RVA: 0x00037F2E File Offset: 0x0003612E
		[LoadInitializationCallback]
		private void OnLoad(MetaData metaData)
		{
			this.InitMembers();
		}

		// Token: 0x06000A03 RID: 2563 RVA: 0x00037F36 File Offset: 0x00036136
		public void OnGameCreated()
		{
			this.ValidateInitialPosition(this.InitialPosition);
		}

		// Token: 0x06000A04 RID: 2564 RVA: 0x00037F44 File Offset: 0x00036144
		public int GetRelationWithClan(Clan other)
		{
			if (this.Leader != null && other.Leader != null)
			{
				return this.Leader.GetRelation(other.Leader);
			}
			return 0;
		}

		// Token: 0x06000A05 RID: 2565 RVA: 0x00037F69 File Offset: 0x00036169
		public void SetLeader(Hero leader)
		{
			this._leader = leader;
			if (leader != null)
			{
				leader.Clan = this;
			}
		}

		// Token: 0x06000A06 RID: 2566 RVA: 0x00037F7C File Offset: 0x0003617C
		private float FindSettlementScoreForBeingHomeSettlement(Settlement settlement)
		{
			int num = (int)settlement.Prosperity;
			foreach (Village village in settlement.BoundVillages)
			{
				num += (int)village.Settlement.Prosperity;
			}
			float num2 = (settlement.IsTown ? 1f : 0.5f);
			float num3 = MathF.Sqrt(1000f + (float)num) / 50f;
			float num4 = ((this.HomeSettlement == settlement) ? 1f : 0.65f);
			float num5 = ((settlement.Culture == this.Culture) ? 1f : 0.25f);
			float num6 = ((settlement.OwnerClan.Culture == this.Culture) ? 1f : 0.85f);
			float num7 = ((settlement.OwnerClan == this) ? 1f : 0.1f);
			float num8 = ((settlement.MapFaction == this.MapFaction) ? 1f : 0.1f);
			float num9;
			if (this.MapFaction.FactionMidSettlement != null)
			{
				num9 = Campaign.Current.Models.MapDistanceModel.GetDistance(this.MapFaction.FactionMidSettlement, settlement);
			}
			else
			{
				num9 = this.InitialPosition.Distance(settlement.GatePosition);
			}
			float num10 = 1f - num9 / Campaign.MaximumDistanceBetweenTwoSettlements;
			num10 *= num10;
			return num2 * num3 * num5 * num6 * num8 * num7 * num10 * num4;
		}

		// Token: 0x06000A07 RID: 2567 RVA: 0x00038108 File Offset: 0x00036308
		public void UpdateHomeSettlement(Settlement updatedSettlement)
		{
			Settlement settlement = this.HomeSettlement;
			if (this.HomeSettlement == null || updatedSettlement == null || (this.HomeSettlement == updatedSettlement && updatedSettlement.OwnerClan != this))
			{
				float num = 0f;
				foreach (Settlement settlement2 in Settlement.All)
				{
					if (settlement2.IsFortification)
					{
						float num2 = this.FindSettlementScoreForBeingHomeSettlement(settlement2);
						if (num2 > num)
						{
							settlement = settlement2;
							num = num2;
						}
					}
				}
			}
			if (settlement != this.HomeSettlement)
			{
				this.HomeSettlement = settlement;
				foreach (Hero hero in this.Heroes)
				{
					hero.UpdateHomeSettlement();
				}
			}
		}

		// Token: 0x06000A08 RID: 2568 RVA: 0x000381E8 File Offset: 0x000363E8
		private void ValidateInitialPosition(Vec2 initialPosition)
		{
			if (initialPosition.IsValid && this.InitialPosition.IsNonZero())
			{
				this.InitialPosition = initialPosition;
				return;
			}
			Vec2 vec;
			if (this.Settlements.Count > 0)
			{
				vec = this.Settlements.GetRandomElement<Settlement>().GatePosition;
			}
			else
			{
				Settlement randomElementWithPredicate = Settlement.All.GetRandomElementWithPredicate((Settlement x) => x.Culture == this.Culture);
				vec = ((randomElementWithPredicate != null) ? randomElementWithPredicate.GatePosition : Settlement.All.GetRandomElement<Settlement>().GatePosition);
			}
			this.InitialPosition = MobilePartyHelper.FindReachablePointAroundPosition(vec, 150f, 0f);
		}

		// Token: 0x06000A09 RID: 2569 RVA: 0x0003827E File Offset: 0x0003647E
		public override TextObject GetName()
		{
			return this.Name;
		}

		// Token: 0x06000A0A RID: 2570 RVA: 0x00038286 File Offset: 0x00036486
		public void ChangeClanName(TextObject name, TextObject informalName)
		{
			this.Name = name;
			this.InformalName = informalName;
		}

		// Token: 0x06000A0B RID: 2571 RVA: 0x00038296 File Offset: 0x00036496
		public override string ToString()
		{
			return string.Concat(new object[] { "(", base.Id, ") ", this.Name });
		}

		// Token: 0x06000A0C RID: 2572 RVA: 0x000382CA File Offset: 0x000364CA
		public StanceLink GetStanceWith(IFaction other)
		{
			return FactionManager.Instance.GetStanceLinkInternal(this, other);
		}

		// Token: 0x06000A0D RID: 2573 RVA: 0x000382D8 File Offset: 0x000364D8
		internal void AddStanceInternal(StanceLink stanceLink)
		{
			this._stances.Add(stanceLink);
		}

		// Token: 0x06000A0E RID: 2574 RVA: 0x000382E6 File Offset: 0x000364E6
		internal void RemoveStanceInternal(StanceLink stanceLink)
		{
			this._stances.Remove(stanceLink);
		}

		// Token: 0x06000A0F RID: 2575 RVA: 0x000382F8 File Offset: 0x000364F8
		private void SetKingdomInternal(Kingdom value)
		{
			if (this.Kingdom != null)
			{
				this.LeaveKingdomInternal();
			}
			this._kingdom = value;
			if (this.Kingdom != null)
			{
				this.EnterKingdomInternal();
			}
			this.UpdateBannerColorsAccordingToKingdom();
			this.LastFactionChangeTime = CampaignTime.Now;
			this.ConsiderSiegesAndMapEvents(this._kingdom);
		}

		// Token: 0x06000A10 RID: 2576 RVA: 0x00038348 File Offset: 0x00036548
		public void ConsiderSiegesAndMapEvents(IFaction factionToConsiderAgainst)
		{
			foreach (WarPartyComponent warPartyComponent in this._warPartyComponentsCache.ToList<WarPartyComponent>())
			{
				warPartyComponent.MobileParty.ConsiderMapEventsAndSiegesInternal(factionToConsiderAgainst);
			}
			foreach (Town town in this.Fiefs)
			{
				town.ConsiderSiegesAndMapEventsInternal(factionToConsiderAgainst);
			}
		}

		// Token: 0x06000A11 RID: 2577 RVA: 0x000383E4 File Offset: 0x000365E4
		private void EnterKingdomInternal()
		{
			this._kingdom.AddClanInternal(this);
			foreach (Hero hero in this.Heroes)
			{
				this._kingdom.OnHeroAdded(hero);
			}
			foreach (Town town in this.Fiefs)
			{
				this._kingdom.OnFortificationAdded(town);
			}
			foreach (WarPartyComponent warPartyComponent in this.WarPartyComponents)
			{
				this._kingdom.OnWarPartyAdded(warPartyComponent);
			}
		}

		// Token: 0x06000A12 RID: 2578 RVA: 0x000384DC File Offset: 0x000366DC
		private void LeaveKingdomInternal()
		{
			ChangeClanInfluenceAction.Apply(this, -this.Influence);
			this._kingdom.RemoveClanInternal(this);
			foreach (Hero hero in this.Heroes)
			{
				this._kingdom.OnHeroRemoved(hero);
			}
			foreach (Town town in this.Fiefs)
			{
				this._kingdom.OnFiefRemoved(town);
			}
			List<WarPartyComponent> list = this.WarPartyComponents.ToListQ<WarPartyComponent>();
			for (int i = list.Count<WarPartyComponent>() - 1; i >= 0; i--)
			{
				if (list[i].MobileParty.Army != null)
				{
					list[i].MobileParty.Army = null;
				}
				this._kingdom.OnWarPartyRemoved(list[i]);
			}
		}

		// Token: 0x06000A13 RID: 2579 RVA: 0x000385F4 File Offset: 0x000367F4
		public void ClanLeaveKingdom(bool giveBackFiefs = false)
		{
			ChangeClanInfluenceAction.Apply(this, -this.Influence);
			if (this.Kingdom != null)
			{
				foreach (Settlement settlement in Campaign.Current.Settlements)
				{
					if (settlement.IsTown && settlement.OwnerClan == this)
					{
						SettlementHelper.TakeEnemyVillagersOutsideSettlements(settlement);
					}
				}
			}
			this.LastFactionChangeTime = CampaignTime.Now;
			this.Kingdom = null;
		}

		// Token: 0x06000A14 RID: 2580 RVA: 0x00038684 File Offset: 0x00036884
		public float CalculateTotalSettlementBaseValue()
		{
			float num = 0f;
			foreach (Town town in this.Fiefs)
			{
				num += Campaign.Current.Models.SettlementValueModel.CalculateSettlementBaseValue(town.Owner.Settlement);
			}
			return num;
		}

		// Token: 0x06000A15 RID: 2581 RVA: 0x000386FC File Offset: 0x000368FC
		public void StartMercenaryService()
		{
			this.IsUnderMercenaryService = true;
		}

		// Token: 0x06000A16 RID: 2582 RVA: 0x00038708 File Offset: 0x00036908
		private int DistanceOfTwoValues(int x, int y)
		{
			int num = ((x < 50) ? x : (100 - x));
			int num2 = ((y < 50) ? y : (100 - y));
			return MathF.Min(num + num2, x - y);
		}

		// Token: 0x06000A17 RID: 2583 RVA: 0x00038738 File Offset: 0x00036938
		public static Clan FindFirst(Predicate<Clan> predicate)
		{
			return Clan.All.FirstOrDefault((Clan x) => predicate(x));
		}

		// Token: 0x06000A18 RID: 2584 RVA: 0x00038768 File Offset: 0x00036968
		public void EndMercenaryService(bool isByLeavingKingdom)
		{
			this.IsUnderMercenaryService = false;
		}

		// Token: 0x06000A19 RID: 2585 RVA: 0x00038774 File Offset: 0x00036974
		public static IEnumerable<Clan> FindAll(Predicate<Clan> predicate)
		{
			return Clan.All.Where((Clan x) => predicate(x));
		}

		// Token: 0x1700022D RID: 557
		// (get) Token: 0x06000A1A RID: 2586 RVA: 0x000387A4 File Offset: 0x000369A4
		public static MBReadOnlyList<Clan> All
		{
			get
			{
				return Campaign.Current.Clans;
			}
		}

		// Token: 0x1700022E RID: 558
		// (get) Token: 0x06000A1B RID: 2587 RVA: 0x000387B0 File Offset: 0x000369B0
		public static IEnumerable<Clan> NonBanditFactions
		{
			get
			{
				foreach (Clan clan in Campaign.Current.Clans)
				{
					if (!clan.IsBanditFaction && CampaignData.NeutralFaction != clan)
					{
						yield return clan;
					}
				}
				List<Clan>.Enumerator enumerator = default(List<Clan>.Enumerator);
				yield break;
				yield break;
			}
		}

		// Token: 0x06000A1C RID: 2588 RVA: 0x000387BC File Offset: 0x000369BC
		public float CalculateTotalSettlementValueForFaction(Kingdom kingdom)
		{
			float num = 0f;
			foreach (Town town in this.Fiefs)
			{
				num += Campaign.Current.Models.SettlementValueModel.CalculateSettlementValueForFaction(town.Owner.Settlement, kingdom);
			}
			return num;
		}

		// Token: 0x1700022F RID: 559
		// (get) Token: 0x06000A1D RID: 2589 RVA: 0x00038834 File Offset: 0x00036A34
		public static IEnumerable<Clan> BanditFactions
		{
			get
			{
				foreach (Clan clan in Campaign.Current.Clans)
				{
					if (clan.IsBanditFaction)
					{
						yield return clan;
					}
				}
				List<Clan>.Enumerator enumerator = default(List<Clan>.Enumerator);
				yield break;
				yield break;
			}
		}

		// Token: 0x06000A1E RID: 2590 RVA: 0x00038840 File Offset: 0x00036A40
		internal void OnFortificationAdded(Town settlement)
		{
			this._fiefsCache.Add(settlement);
			this._settlementsCache.Add(settlement.Settlement);
			foreach (Village village in settlement.Settlement.BoundVillages)
			{
				this.OnBoundVillageAddedInternal(village);
			}
			this._midPointCalculated = false;
			this._distanceToClosestNonAllyFortificationCacheDirty = true;
			if (this._kingdom != null)
			{
				this._kingdom._midPointCalculated = false;
				this._kingdom._distanceToClosestNonAllyFortificationCacheDirty = true;
				this._kingdom.OnFortificationAdded(settlement);
			}
		}

		// Token: 0x06000A1F RID: 2591 RVA: 0x000388F0 File Offset: 0x00036AF0
		internal void OnFortificationRemoved(Town settlement)
		{
			this._fiefsCache.Remove(settlement);
			this._settlementsCache.Remove(settlement.Settlement);
			foreach (Village village in settlement.Settlement.BoundVillages)
			{
				this._villagesCache.Remove(village);
				this._settlementsCache.Remove(village.Settlement);
			}
			this._midPointCalculated = false;
			this._distanceToClosestNonAllyFortificationCacheDirty = true;
			if (this._kingdom != null)
			{
				this._kingdom._midPointCalculated = false;
				this._kingdom._distanceToClosestNonAllyFortificationCacheDirty = true;
				this._kingdom.OnFiefRemoved(settlement);
			}
		}

		// Token: 0x06000A20 RID: 2592 RVA: 0x000389BC File Offset: 0x00036BBC
		public void OnBoundVillageAdded(Village village)
		{
			this.OnBoundVillageAddedInternal(village);
			if (this._kingdom != null)
			{
				this._kingdom.OnBoundVillageAdded(village);
			}
		}

		// Token: 0x06000A21 RID: 2593 RVA: 0x000389D9 File Offset: 0x00036BD9
		private void OnBoundVillageAddedInternal(Village village)
		{
			this._villagesCache.Add(village);
			this._settlementsCache.Add(village.Settlement);
		}

		// Token: 0x06000A22 RID: 2594 RVA: 0x000389F8 File Offset: 0x00036BF8
		internal void OnLordAdded(Hero lord)
		{
			this._lordsCache.Add(lord);
			this.OnHeroAdded(lord);
		}

		// Token: 0x06000A23 RID: 2595 RVA: 0x00038A0D File Offset: 0x00036C0D
		internal void OnLordRemoved(Hero lord)
		{
			this._lordsCache.Remove(lord);
			this.OnHeroRemoved(lord);
		}

		// Token: 0x06000A24 RID: 2596 RVA: 0x00038A23 File Offset: 0x00036C23
		internal void OnCompanionAdded(Hero companion)
		{
			this._companionsCache.Add(companion);
			this.OnHeroAdded(companion);
		}

		// Token: 0x06000A25 RID: 2597 RVA: 0x00038A38 File Offset: 0x00036C38
		internal void OnCompanionRemoved(Hero companion)
		{
			this._companionsCache.Remove(companion);
			this.OnHeroRemoved(companion);
		}

		// Token: 0x06000A26 RID: 2598 RVA: 0x00038A4E File Offset: 0x00036C4E
		private void OnHeroAdded(Hero hero)
		{
			this._heroesCache.Add(hero);
			if (this._kingdom != null)
			{
				this._kingdom.OnHeroAdded(hero);
			}
		}

		// Token: 0x06000A27 RID: 2599 RVA: 0x00038A70 File Offset: 0x00036C70
		private void OnHeroRemoved(Hero hero)
		{
			this._heroesCache.Remove(hero);
			if (this._kingdom != null)
			{
				this._kingdom.OnHeroRemoved(hero);
			}
		}

		// Token: 0x06000A28 RID: 2600 RVA: 0x00038A93 File Offset: 0x00036C93
		internal void OnWarPartyAdded(WarPartyComponent warPartyComponent)
		{
			this._warPartyComponentsCache.Add(warPartyComponent);
			if (this._kingdom != null)
			{
				this._kingdom.OnWarPartyAdded(warPartyComponent);
			}
		}

		// Token: 0x06000A29 RID: 2601 RVA: 0x00038AB5 File Offset: 0x00036CB5
		internal void OnWarPartyRemoved(WarPartyComponent warPartyComponent)
		{
			this._warPartyComponentsCache.Remove(warPartyComponent);
			if (this._kingdom != null)
			{
				this._kingdom.OnWarPartyRemoved(warPartyComponent);
			}
		}

		// Token: 0x06000A2A RID: 2602 RVA: 0x00038AD8 File Offset: 0x00036CD8
		internal void OnSupporterNotableAdded(Hero hero)
		{
			this._supporterNotablesCache.Add(hero);
		}

		// Token: 0x06000A2B RID: 2603 RVA: 0x00038AE6 File Offset: 0x00036CE6
		internal void OnSupporterNotableRemoved(Hero hero)
		{
			this._supporterNotablesCache.Remove(hero);
		}

		// Token: 0x06000A2C RID: 2604 RVA: 0x00038AF8 File Offset: 0x00036CF8
		public void AddRenown(float value, bool shouldNotify = true)
		{
			if (value > 0f)
			{
				this.Renown += value;
				int num = Campaign.Current.Models.ClanTierModel.CalculateTier(this);
				if (num > this.Tier)
				{
					this.Tier = num;
					CampaignEventDispatcher.Instance.OnClanTierChanged(this, shouldNotify);
				}
			}
		}

		// Token: 0x06000A2D RID: 2605 RVA: 0x00038B4D File Offset: 0x00036D4D
		public void ResetClanRenown()
		{
			this.Renown = 0f;
			this.Tier = Campaign.Current.Models.ClanTierModel.CalculateTier(this);
			CampaignEventDispatcher.Instance.OnClanTierChanged(this, false);
		}

		// Token: 0x06000A2E RID: 2606 RVA: 0x00038B84 File Offset: 0x00036D84
		public void OnSupportedByClan(Clan supporterClan)
		{
			DiplomacyModel diplomacyModel = Campaign.Current.Models.DiplomacyModel;
			int influenceCostOfSupportingClan = diplomacyModel.GetInfluenceCostOfSupportingClan();
			if (supporterClan.Influence >= (float)influenceCostOfSupportingClan)
			{
				int influenceValueOfSupportingClan = diplomacyModel.GetInfluenceValueOfSupportingClan();
				int relationValueOfSupportingClan = diplomacyModel.GetRelationValueOfSupportingClan();
				ChangeClanInfluenceAction.Apply(supporterClan, (float)(-(float)influenceCostOfSupportingClan));
				ChangeClanInfluenceAction.Apply(this, (float)influenceValueOfSupportingClan);
				ChangeRelationAction.ApplyRelationChangeBetweenHeroes(supporterClan.Leader, this.Leader, relationValueOfSupportingClan, true);
			}
		}

		// Token: 0x06000A2F RID: 2607 RVA: 0x00038BE4 File Offset: 0x00036DE4
		public static Clan CreateSettlementRebelClan(Settlement settlement, Hero owner, int iconMeshId = -1)
		{
			Clan clan = Clan.CreateClan(settlement.StringId + "_rebel_clan");
			TextObject textObject = new TextObject("{=2LIV2cy7}{SETTLEMENT}{.o} rebels", null);
			textObject.SetTextVariable("SETTLEMENT", settlement.Name);
			clan.InitializeClan(textObject, textObject, settlement.Culture, Banner.CreateOneColoredBannerWithOneIcon(settlement.MapFaction.Banner.GetFirstIconColor(), settlement.MapFaction.Banner.GetPrimaryColor(), iconMeshId), settlement.GatePosition, false);
			clan.SetLeader(owner);
			clan.LabelColor = settlement.MapFaction.LabelColor;
			clan.Color = settlement.MapFaction.Color2;
			clan.Color2 = settlement.MapFaction.Color;
			clan.IsRebelClan = true;
			clan.Tier = Campaign.Current.Models.ClanTierModel.RebelClanStartingTier;
			clan.BannerBackgroundColorPrimary = settlement.MapFaction.Banner.GetFirstIconColor();
			clan.BannerBackgroundColorSecondary = settlement.MapFaction.Banner.GetFirstIconColor();
			clan.BannerIconColor = settlement.MapFaction.Banner.GetPrimaryColor();
			clan._midPointCalculated = false;
			clan._distanceToClosestNonAllyFortificationCacheDirty = true;
			clan.HomeSettlement = settlement;
			return clan;
		}

		// Token: 0x06000A30 RID: 2608 RVA: 0x00038D14 File Offset: 0x00036F14
		public static Clan CreateCompanionToLordClan(Hero hero, Settlement settlement, TextObject clanName, int newClanIconId)
		{
			Clan clan = Clan.CreateClan(Hero.MainHero.MapFaction.StringId + "_companion_clan");
			clan.InitializeClan(clanName, clanName, settlement.Culture, Banner.CreateOneColoredBannerWithOneIcon(settlement.MapFaction.Banner.GetFirstIconColor(), settlement.MapFaction.Banner.GetPrimaryColor(), newClanIconId), settlement.GatePosition, false);
			clan.Kingdom = Hero.MainHero.Clan.Kingdom;
			clan.Tier = Campaign.Current.Models.ClanTierModel.CompanionToLordClanStartingTier;
			hero.Clan = clan;
			clan.SetLeader(hero);
			clan.IsNoble = true;
			ChangeOwnerOfSettlementAction.ApplyByGift(settlement, hero);
			CampaignEventDispatcher.Instance.OnCompanionClanCreated(clan);
			return clan;
		}

		// Token: 0x06000A31 RID: 2609 RVA: 0x00038DD4 File Offset: 0x00036FD4
		public MobileParty CreateNewMobileParty(Hero hero)
		{
			MobileParty mobileParty;
			if (hero.CurrentSettlement != null)
			{
				Settlement currentSettlement = hero.CurrentSettlement;
				if (hero.PartyBelongedTo != null && hero.PartyBelongedTo.IsMainParty)
				{
					PartyBase.MainParty.MemberRoster.RemoveTroop(hero.CharacterObject, 1, default(UniqueTroopDescriptor), 0);
				}
				mobileParty = MobilePartyHelper.SpawnLordParty(hero, currentSettlement);
			}
			else
			{
				MobileParty partyBelongedTo = hero.PartyBelongedTo;
				if (partyBelongedTo != null)
				{
					partyBelongedTo.AddElementToMemberRoster(hero.CharacterObject, -1, false);
				}
				mobileParty = MobilePartyHelper.SpawnLordParty(hero, (partyBelongedTo != null) ? partyBelongedTo.Position2D : SettlementHelper.GetBestSettlementToSpawnAround(hero).GatePosition, 5f);
			}
			return mobileParty;
		}

		// Token: 0x06000A32 RID: 2610 RVA: 0x00038E6B File Offset: 0x0003706B
		public MobileParty CreateNewMobilePartyAtPosition(Hero hero, Vec2 spawnPosition)
		{
			return MobilePartyHelper.SpawnLordParty(hero, spawnPosition, 5f);
		}

		// Token: 0x06000A33 RID: 2611 RVA: 0x00038E7C File Offset: 0x0003707C
		public Dictionary<Hero, int> GetHeirApparents()
		{
			Dictionary<Hero, int> dictionary = new Dictionary<Hero, int>();
			int heroComesOfAge = Campaign.Current.Models.AgeModel.HeroComesOfAge;
			Hero leader = this.Leader;
			foreach (Hero hero in this.Heroes)
			{
				if (hero != this.Leader && hero.IsAlive && hero.DeathMark == KillCharacterAction.KillCharacterActionDetail.None && !hero.IsNotSpawned && !hero.IsDisabled && !hero.IsWanderer && !hero.IsNotable && hero.Age >= (float)heroComesOfAge)
				{
					int num = Campaign.Current.Models.HeirSelectionCalculationModel.CalculateHeirSelectionPoint(hero, this.Leader, ref leader);
					dictionary.Add(hero, num);
				}
			}
			if (leader != this.Leader)
			{
				Dictionary<Hero, int> dictionary2 = dictionary;
				Hero hero2 = leader;
				dictionary2[hero2] += Campaign.Current.Models.HeirSelectionCalculationModel.HighestSkillPoint;
			}
			return dictionary;
		}

		// Token: 0x06000A34 RID: 2612 RVA: 0x00038F9C File Offset: 0x0003719C
		private void UpdateBannerColorsAccordingToKingdom()
		{
			if (this.Kingdom != null)
			{
				Banner banner = this.Banner;
				if (banner != null)
				{
					banner.ChangePrimaryColor(this.Kingdom.PrimaryBannerColor);
				}
				Banner banner2 = this.Banner;
				if (banner2 != null)
				{
					banner2.ChangeIconColors(this.Kingdom.SecondaryBannerColor);
				}
				if (this.Kingdom.RulingClan == this)
				{
					Banner banner3 = this._banner;
					if (banner3 != null)
					{
						banner3.ChangePrimaryColor(this.Kingdom.PrimaryBannerColor);
					}
					Banner banner4 = this._banner;
					if (banner4 == null)
					{
						return;
					}
					banner4.ChangeIconColors(this.Kingdom.SecondaryBannerColor);
					return;
				}
			}
			else if (this.BannerBackgroundColorPrimary != 0U || this.BannerBackgroundColorSecondary != 0U || this.BannerIconColor != 0U)
			{
				Banner banner5 = this.Banner;
				if (banner5 != null)
				{
					banner5.ChangeBackgroundColor(this.BannerBackgroundColorPrimary, this.BannerBackgroundColorSecondary);
				}
				Banner banner6 = this.Banner;
				if (banner6 == null)
				{
					return;
				}
				banner6.ChangeIconColors(this.BannerIconColor);
				return;
			}
			else if (this.IsMinorFaction)
			{
				Banner banner7 = this.Banner;
				if (banner7 != null)
				{
					banner7.ChangePrimaryColor(this.Color);
				}
				Banner banner8 = this.Banner;
				if (banner8 == null)
				{
					return;
				}
				banner8.ChangeIconColors((this.Color != this.Color2) ? this.Color2 : uint.MaxValue);
			}
		}

		// Token: 0x06000A35 RID: 2613 RVA: 0x000390C7 File Offset: 0x000372C7
		public void UpdateBannerColor(uint backgroundColor, uint iconColor)
		{
			this.BannerBackgroundColorPrimary = backgroundColor;
			this.BannerBackgroundColorSecondary = backgroundColor;
			this.BannerIconColor = iconColor;
		}

		// Token: 0x06000A36 RID: 2614 RVA: 0x000390DE File Offset: 0x000372DE
		internal void DeactivateClan()
		{
			this._isEliminated = true;
		}

		// Token: 0x06000A37 RID: 2615 RVA: 0x000390E7 File Offset: 0x000372E7
		string IFaction.get_StringId()
		{
			return base.StringId;
		}

		// Token: 0x06000A38 RID: 2616 RVA: 0x000390EF File Offset: 0x000372EF
		MBGUID IFaction.get_Id()
		{
			return base.Id;
		}

		// Token: 0x040002C9 RID: 713
		[SaveableField(54)]
		private PartyTemplateObject _defaultPartyTemplate;

		// Token: 0x040002CE RID: 718
		[SaveableField(97)]
		private bool _isEliminated;

		// Token: 0x040002CF RID: 719
		[SaveableField(99)]
		private List<CharacterObject> _minorFactionCharacterTemplates;

		// Token: 0x040002D0 RID: 720
		[CachedData]
		private MBList<Hero> _supporterNotablesCache;

		// Token: 0x040002D1 RID: 721
		[SaveableField(57)]
		private Kingdom _kingdom;

		// Token: 0x040002D2 RID: 722
		[CachedData]
		private MBList<Town> _fiefsCache;

		// Token: 0x040002D3 RID: 723
		[CachedData]
		private MBList<Village> _villagesCache;

		// Token: 0x040002D4 RID: 724
		[CachedData]
		private MBList<Settlement> _settlementsCache;

		// Token: 0x040002D5 RID: 725
		[CachedData]
		private MBList<Hero> _lordsCache;

		// Token: 0x040002D6 RID: 726
		[CachedData]
		private MBList<Hero> _heroesCache;

		// Token: 0x040002D7 RID: 727
		[CachedData]
		private MBList<Hero> _companionsCache;

		// Token: 0x040002D8 RID: 728
		[CachedData]
		private MBList<WarPartyComponent> _warPartyComponentsCache;

		// Token: 0x040002D9 RID: 729
		[SaveableField(62)]
		private float _influence;

		// Token: 0x040002ED RID: 749
		[CachedData]
		private Settlement _clanMidSettlement;

		// Token: 0x040002EF RID: 751
		[SaveableField(82)]
		private CharacterObject _basicTroop;

		// Token: 0x040002F0 RID: 752
		[SaveableField(83)]
		private Hero _leader;

		// Token: 0x040002F1 RID: 753
		[SaveableField(84)]
		private Banner _banner;

		// Token: 0x040002F5 RID: 757
		[SaveableField(91)]
		private int _tier;

		// Token: 0x040002F7 RID: 759
		[SaveableField(120)]
		private float _aggressiveness;

		// Token: 0x040002F8 RID: 760
		[SaveableField(130)]
		private int _tributeWallet;

		// Token: 0x040002F9 RID: 761
		[SaveableField(95)]
		private Settlement _home;

		// Token: 0x040002FA RID: 762
		[SaveableField(110)]
		private int _clanDebtToKingdom;

		// Token: 0x040002FB RID: 763
		[CachedData]
		private List<StanceLink> _stances;

		// Token: 0x040002FC RID: 764
		[CachedData]
		private float _distanceToClosestNonAllyFortificationCache;

		// Token: 0x040002FD RID: 765
		[CachedData]
		internal bool _distanceToClosestNonAllyFortificationCacheDirty = true;
	}
}
