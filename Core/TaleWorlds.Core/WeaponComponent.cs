using System;
using System.Collections.Generic;
using System.Xml;
using TaleWorlds.Library;
using TaleWorlds.ObjectSystem;

namespace TaleWorlds.Core
{
	// Token: 0x02000039 RID: 57
	public class WeaponComponent : ItemComponent
	{
		// Token: 0x06000426 RID: 1062 RVA: 0x0000FD3C File Offset: 0x0000DF3C
		internal static void AutoGeneratedStaticCollectObjectsWeaponComponent(object o, List<object> collectedObjects)
		{
			((WeaponComponent)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x06000427 RID: 1063 RVA: 0x0000FD4A File Offset: 0x0000DF4A
		protected override void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
			base.AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		// Token: 0x17000165 RID: 357
		// (get) Token: 0x06000428 RID: 1064 RVA: 0x0000FD53 File Offset: 0x0000DF53
		public MBReadOnlyList<WeaponComponentData> Weapons
		{
			get
			{
				return this._weaponList;
			}
		}

		// Token: 0x17000166 RID: 358
		// (get) Token: 0x06000429 RID: 1065 RVA: 0x0000FD5B File Offset: 0x0000DF5B
		public WeaponComponentData PrimaryWeapon
		{
			get
			{
				return this._weaponList[0];
			}
		}

		// Token: 0x0600042A RID: 1066 RVA: 0x0000FD69 File Offset: 0x0000DF69
		public void AddWeapon(WeaponComponentData weaponComponentData, ItemModifierGroup itemModifierGroup)
		{
			base.ItemModifierGroup = itemModifierGroup;
			this._weaponList.Add(weaponComponentData);
		}

		// Token: 0x0600042B RID: 1067 RVA: 0x0000FD7E File Offset: 0x0000DF7E
		public override ItemComponent GetCopy()
		{
			return new WeaponComponent(base.Item);
		}

		// Token: 0x0600042C RID: 1068 RVA: 0x0000FD8B File Offset: 0x0000DF8B
		public WeaponComponent(ItemObject item)
		{
			base.Item = item;
		}

		// Token: 0x0600042D RID: 1069 RVA: 0x0000FDA5 File Offset: 0x0000DFA5
		public ItemObject.ItemTypeEnum GetItemType()
		{
			return WeaponComponentData.GetItemTypeFromWeaponClass(this._weaponList[0].WeaponClass);
		}

		// Token: 0x0600042E RID: 1070 RVA: 0x0000FDC0 File Offset: 0x0000DFC0
		public override void Deserialize(MBObjectManager objectManager, XmlNode node)
		{
			base.Deserialize(objectManager, node);
			XmlAttribute xmlAttribute = node.Attributes["modifier_group"];
			if (xmlAttribute != null)
			{
				string value = xmlAttribute.Value;
			}
			WeaponComponentData weaponComponentData = new WeaponComponentData(base.Item, WeaponClass.Undefined, (WeaponFlags)0UL);
			weaponComponentData.Deserialize(base.Item, node);
			this._weaponList.Add(weaponComponentData);
		}

		// Token: 0x0400021B RID: 539
		private readonly MBList<WeaponComponentData> _weaponList = new MBList<WeaponComponentData>();
	}
}
