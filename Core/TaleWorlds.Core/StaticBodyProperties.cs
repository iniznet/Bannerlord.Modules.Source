using System;
using System.Collections.Generic;
using System.Globalization;
using System.Xml;
using TaleWorlds.Library;
using TaleWorlds.SaveSystem;

namespace TaleWorlds.Core
{
	[Serializable]
	public struct StaticBodyProperties : ISerializableObject
	{
		public static void AutoGeneratedStaticCollectObjectsStaticBodyProperties(object o, List<object> collectedObjects)
		{
			((StaticBodyProperties)o).AutoGeneratedInstanceCollectObjects(collectedObjects);
		}

		private void AutoGeneratedInstanceCollectObjects(List<object> collectedObjects)
		{
		}

		internal static object AutoGeneratedGetMemberValueKeyPart1(object o)
		{
			return ((StaticBodyProperties)o).KeyPart1;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart2(object o)
		{
			return ((StaticBodyProperties)o).KeyPart2;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart3(object o)
		{
			return ((StaticBodyProperties)o).KeyPart3;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart4(object o)
		{
			return ((StaticBodyProperties)o).KeyPart4;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart5(object o)
		{
			return ((StaticBodyProperties)o).KeyPart5;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart6(object o)
		{
			return ((StaticBodyProperties)o).KeyPart6;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart7(object o)
		{
			return ((StaticBodyProperties)o).KeyPart7;
		}

		internal static object AutoGeneratedGetMemberValueKeyPart8(object o)
		{
			return ((StaticBodyProperties)o).KeyPart8;
		}

		[SaveableProperty(1)]
		public ulong KeyPart1 { get; private set; }

		[SaveableProperty(2)]
		public ulong KeyPart2 { get; private set; }

		[SaveableProperty(3)]
		public ulong KeyPart3 { get; private set; }

		[SaveableProperty(4)]
		public ulong KeyPart4 { get; private set; }

		[SaveableProperty(5)]
		public ulong KeyPart5 { get; private set; }

		[SaveableProperty(6)]
		public ulong KeyPart6 { get; private set; }

		[SaveableProperty(7)]
		public ulong KeyPart7 { get; private set; }

		[SaveableProperty(8)]
		public ulong KeyPart8 { get; private set; }

		public StaticBodyProperties(ulong keyPart1, ulong keyPart2, ulong keyPart3, ulong keyPart4, ulong keyPart5, ulong keyPart6, ulong keyPart7, ulong keyPart8)
		{
			this.KeyPart1 = keyPart1;
			this.KeyPart2 = keyPart2;
			this.KeyPart3 = keyPart3;
			this.KeyPart4 = keyPart4;
			this.KeyPart5 = keyPart5;
			this.KeyPart6 = keyPart6;
			this.KeyPart7 = keyPart7;
			this.KeyPart8 = keyPart8;
		}

		public static bool FromXmlNode(XmlNode node, out StaticBodyProperties staticBodyProperties)
		{
			string value = node.Attributes["key"].Value;
			if (value.Length != 128)
			{
				staticBodyProperties = default(StaticBodyProperties);
				return false;
			}
			ulong num;
			ulong.TryParse(value.Substring(0, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num);
			ulong num2;
			ulong.TryParse(value.Substring(16, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num2);
			ulong num3;
			ulong.TryParse(value.Substring(32, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num3);
			ulong num4;
			ulong.TryParse(value.Substring(48, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num4);
			ulong num5;
			ulong.TryParse(value.Substring(64, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num5);
			ulong num6;
			ulong.TryParse(value.Substring(80, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num6);
			ulong num7;
			ulong.TryParse(value.Substring(96, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num7);
			ulong num8;
			ulong.TryParse(value.Substring(112, 16), NumberStyles.AllowHexSpecifier, CultureInfo.CurrentCulture, out num8);
			staticBodyProperties = new StaticBodyProperties(num, num2, num3, num4, num5, num6, num7, num8);
			return true;
		}

		public override int GetHashCode()
		{
			uint num = (((((((((((((((((((((((((((2166136261U ^ (uint)((uint)this.KeyPart1 << 32)) * 16777619U) ^ (uint)((uint)this.KeyPart2 << 32)) * 16777619U) ^ (uint)((uint)this.KeyPart3 << 32)) * 16777619U) ^ (uint)((uint)this.KeyPart4 << 32)) * 16777619U) ^ (uint)((uint)this.KeyPart5 << 32)) * 16777619U) ^ (uint)((uint)this.KeyPart6 << 32)) * 16777619U) ^ (uint)((uint)this.KeyPart7 << 32)) * 16777619U) ^ (uint)this.KeyPart1) * 16777619U) ^ (uint)this.KeyPart2) * 16777619U) ^ (uint)this.KeyPart3) * 16777619U) ^ (uint)this.KeyPart4) * 16777619U) ^ (uint)this.KeyPart5) * 16777619U) ^ (uint)this.KeyPart6) * 16777619U) ^ (uint)this.KeyPart7) * 16777619U;
			uint num2 = num + (num << 13);
			uint num3 = num2 ^ (num2 >> 7);
			uint num4 = num3 + (num3 << 3);
			uint num5 = num4 ^ (num4 >> 17);
			return (int)(num5 + (num5 << 5));
		}

		public override bool Equals(object obj)
		{
			return base.Equals(obj);
		}

		public static bool operator ==(StaticBodyProperties a, StaticBodyProperties b)
		{
			return a == b || (a != null && b != null && (a.KeyPart1 == b.KeyPart1 && a.KeyPart2 == b.KeyPart2 && a.KeyPart3 == b.KeyPart3 && a.KeyPart4 == b.KeyPart4 && a.KeyPart5 == b.KeyPart5 && a.KeyPart6 == b.KeyPart6 && a.KeyPart7 == b.KeyPart7) && a.KeyPart8 == b.KeyPart8);
		}

		public static bool operator !=(StaticBodyProperties a, StaticBodyProperties b)
		{
			return !(a == b);
		}

		public override string ToString()
		{
			MBStringBuilder mbstringBuilder = default(MBStringBuilder);
			mbstringBuilder.Initialize(150, "ToString");
			mbstringBuilder.Append<string>("key=\"");
			mbstringBuilder.Append<string>(this.KeyPart1.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart2.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart3.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart4.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart5.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart6.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart7.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>(this.KeyPart8.ToString("X").PadLeft(16, '0'));
			mbstringBuilder.Append<string>("\" ");
			return mbstringBuilder.ToStringAndRelease();
		}

		void ISerializableObject.DeserializeFrom(IReader reader)
		{
			this.KeyPart1 = reader.ReadULong();
			this.KeyPart2 = reader.ReadULong();
			this.KeyPart3 = reader.ReadULong();
			this.KeyPart4 = reader.ReadULong();
			this.KeyPart5 = reader.ReadULong();
			this.KeyPart6 = reader.ReadULong();
			this.KeyPart7 = reader.ReadULong();
			this.KeyPart8 = reader.ReadULong();
		}

		void ISerializableObject.SerializeTo(IWriter writer)
		{
			writer.WriteULong(this.KeyPart1);
			writer.WriteULong(this.KeyPart2);
			writer.WriteULong(this.KeyPart3);
			writer.WriteULong(this.KeyPart4);
			writer.WriteULong(this.KeyPart5);
			writer.WriteULong(this.KeyPart6);
			writer.WriteULong(this.KeyPart7);
			writer.WriteULong(this.KeyPart8);
		}

		public static StaticBodyProperties GetRandomStaticBodyProperties()
		{
			Random random = new Random((int)DateTime.Now.Ticks);
			StaticBodyProperties staticBodyProperties = default(StaticBodyProperties);
			staticBodyProperties.KeyPart1 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart1 <<= 32;
			staticBodyProperties.KeyPart1 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart2 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart2 <<= 32;
			staticBodyProperties.KeyPart2 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart3 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart3 <<= 32;
			staticBodyProperties.KeyPart3 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart4 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart4 <<= 32;
			staticBodyProperties.KeyPart4 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart5 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart5 <<= 32;
			staticBodyProperties.KeyPart5 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart6 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart6 <<= 32;
			staticBodyProperties.KeyPart6 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart7 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart7 <<= 32;
			staticBodyProperties.KeyPart7 += (ulong)((long)random.Next());
			staticBodyProperties.KeyPart8 = (ulong)((long)random.Next());
			staticBodyProperties.KeyPart8 <<= 32;
			staticBodyProperties.KeyPart8 += (ulong)((long)random.Next());
			return staticBodyProperties;
		}

		public const int WeightKeyNo = 59;

		public const int BuildKeyNo = 60;
	}
}
